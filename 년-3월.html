<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2022년 3월 | Today I Learned in 2022</title>
  <meta name="description" content="TIL, 그날 그날 익힌 내용을 담고 있습니다." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="2022년 3월 | Today I Learned in 2022" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="TIL, 그날 그날 익힌 내용을 담고 있습니다." />
  <meta name="github-repo" content="yeonkyupark/TIL2022" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2022년 3월 | Today I Learned in 2022" />
  
  <meta name="twitter:description" content="TIL, 그날 그날 익힌 내용을 담고 있습니다." />
  

<meta name="author" content="PARK Yeonkyu" />


<meta name="date" content="2022-03-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="index.html"/>
<link rel="next" href="년-2월.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TIL 2022</a></li>

<li class="divider"></li>
<li><a href="index.html#시작하며">시작하며<span></span></a></li>
<li><a href="년-3월.html#년-3월">2022년 3월<span></span></a><ul>
<li><a href="년-3월.html#til20220317">TIL20220317<span></span></a><ul>
<li><a href="년-3월.html#페널티-회귀분석---2">페널티 회귀분석 - 2<span></span></a></li>
<li><a href="년-3월.html#모델별-비교">모델별 비교<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220316">TIL20220316<span></span></a><ul>
<li><a href="년-3월.html#페널티-회귀분석---1">페널티 회귀분석 - 1<span></span></a></li>
<li><a href="년-3월.html#markdown-문법">Markdown 문법<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220315">TIL20220315<span></span></a><ul>
<li><a href="년-3월.html#caret을-이용한-기계학습-절차">caret을 이용한 기계학습 절차<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220314">TIL20220314<span></span></a><ul>
<li><a href="년-3월.html#일반적인-데이터-분할">일반적인 데이터 분할<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220313">TIL20220313<span></span></a><ul>
<li><a href="년-3월.html#시계열-데이터-분할">시계열 데이터 분할<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220312">TIL20220312<span></span></a><ul>
<li><a href="년-3월.html#rstudio-chunk-options">RStudio Chunk options<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220311">TIL20220311<span></span></a><ul>
<li><a href="년-3월.html#url을-통해-직접-패키지-설치">URL을 통해 직접 패키지 설치<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220310">TIL20220310<span></span></a><ul>
<li><a href="년-3월.html#smote-데이터-형식-오류">SMOTE 데이터 형식 오류<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220309">TIL20220309<span></span></a><ul>
<li><a href="년-3월.html#클래스-불균형과-샘플링">클래스 불균형과 샘플링<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220308">TIL20220308<span></span></a><ul>
<li><a href="년-3월.html#r-에러-수정">R 에러 수정<span></span></a></li>
<li><a href="년-3월.html#결측치-시각화">결측치 시각화<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220307">TIL20220307<span></span></a><ul>
<li><a href="년-3월.html#결측치-처리">결측치 처리<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220306">TIL20220306<span></span></a><ul>
<li><a href="년-3월.html#대응표본-평균검정">대응표본 평균검정<span></span></a></li>
<li><a href="년-3월.html#독립표본-비율검정">독립표본 비율검정<span></span></a></li>
<li><a href="년-3월.html#독립표본-평균검정">독립표본 평균검정<span></span></a></li>
<li><a href="년-3월.html#일표본-비율검정">일표본 비율검정<span></span></a></li>
<li><a href="년-3월.html#일표본-평균검정">일표본 평균검정<span></span></a></li>
<li><a href="년-3월.html#평균검정">평균검정<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220305">TIL20220305<span></span></a><ul>
<li><a href="년-3월.html#정규분포">정규분포<span></span></a></li>
<li><a href="년-3월.html#데이터의-정규성-검정">데이터의 정규성 검정<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220304">TIL20220304<span></span></a><ul>
<li><a href="년-3월.html#가설검정">가설검정<span></span></a></li>
<li><a href="년-3월.html#확률분포">확률분포<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220303">TIL20220303<span></span></a><ul>
<li><a href="년-3월.html#데이터-요약">데이터 요약<span></span></a></li>
<li><a href="년-3월.html#변동성-지표">변동성 지표<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220302">TIL20220302<span></span></a><ul>
<li><a href="년-3월.html#데이터-요약-1">데이터 요약<span></span></a></li>
</ul></li>
<li><a href="년-3월.html#til20220301">TIL20220301<span></span></a><ul>
<li><a href="년-3월.html#데이터-요약-2">데이터 요약<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="년-2월.html#년-2월">2022년 2월<span></span></a><ul>
<li><a href="년-2월.html#til20220228">TIL20220228<span></span></a><ul>
<li><a href="년-2월.html#데이터-수집">데이터 수집<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220227">TIL20220227<span></span></a><ul>
<li><a href="년-2월.html#github에-파일-올리기">GitHub에 파일 올리기<span></span></a></li>
<li><a href="년-2월.html#엑셀-if-함수-정리">엑셀 if 함수 정리<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220226">TIL20220226<span></span></a><ul>
<li><a href="년-2월.html#데이터-훑어보기">데이터 훑어보기<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220225">TIL20220225<span></span></a><ul>
<li><a href="년-2월.html#r에서-데이터-읽어-오기">R에서 데이터 읽어 오기<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220224">TIL20220224<span></span></a><ul>
<li><a href="년-2월.html#rstudio-bookdown-github-배포하기">RStudio + bookdown + github 배포하기<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220223">TIL20220223<span></span></a><ul>
<li><a href="년-2월.html#rstudio.cloud-pat-업데이트">rstudio.cloud PAT 업데이트<span></span></a></li>
<li><a href="년-2월.html#파비콘-만들기">파비콘 만들기<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220222">TIL20220222<span></span></a><ul>
<li><a href="년-2월.html#code-snippet-in-r">code snippet in R<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220221">TIL20220221<span></span></a><ul>
<li><a href="년-2월.html#github-actions를-이용한-자동-배포">Github Actions를 이용한 자동 배포<span></span></a></li>
<li><a href="년-2월.html#실습">실습<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220220">TIL20220220<span></span></a><ul>
<li><a href="년-2월.html#netlify-자동-배포-1">netlify 자동 배포 1<span></span></a></li>
<li><a href="년-2월.html#netlify-자동-배포-2">netlify 자동 배포 2<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220219">TIL20220219<span></span></a><ul>
<li><a href="년-2월.html#netlify와-bookdown-연동">netlify와 bookdown 연동<span></span></a></li>
</ul></li>
<li><a href="년-2월.html#til20220218">TIL20220218<span></span></a><ul>
<li><a href="년-2월.html#github-repo-삭제하면-잔디도-죽는다">github repo 삭제하면 잔디도 죽는다<span></span></a></li>
<li><a href="년-2월.html#bookdown으로-블로그-전환">bookdown으로 블로그 전환<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="년-1월.html#년-1월">2022년 1월<span></span></a></li>
<li><a href="연습장.html#연습장">연습장<span></span></a><ul>
<li><a href="연습장.html#r-코드-연습">r 코드 연습<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Today I Learned in 2022</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="년-3월" class="section level1 hasAnchor">
<h1>2022년 3월<a href="년-3월.html#년-3월" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="til20220317" class="section level2 hasAnchor">
<h2>TIL20220317<a href="년-3월.html#til20220317" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="페널티-회귀분석---2" class="section level3 hasAnchor">
<h3>페널티 회귀분석 - 2<a href="년-3월.html#페널티-회귀분석---2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="년-3월.html#cb2-1"></a><span class="kw">str</span>(Boston)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    506 obs. of  14 variables:
##  $ crim   : num  0.00632 0.02731 0.02729 0.03237 0.06905 ...
##  $ zn     : num  18 0 0 0 0 0 12.5 12.5 12.5 12.5 ...
##  $ indus  : num  2.31 7.07 7.07 2.18 2.18 2.18 7.87 7.87 7.87 7.87 ...
##  $ chas   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ nox    : num  0.538 0.469 0.469 0.458 0.458 0.458 0.524 0.524 0.524 0.524 ...
##  $ rm     : num  6.58 6.42 7.18 7 7.15 ...
##  $ age    : num  65.2 78.9 61.1 45.8 54.2 58.7 66.6 96.1 100 85.9 ...
##  $ dis    : num  4.09 4.97 4.97 6.06 6.06 ...
##  $ rad    : int  1 2 2 3 3 3 5 5 5 5 ...
##  $ tax    : num  296 242 242 222 222 222 311 311 311 311 ...
##  $ ptratio: num  15.3 17.8 17.8 18.7 18.7 18.7 15.2 15.2 15.2 15.2 ...
##  $ black  : num  397 397 393 395 397 ...
##  $ lstat  : num  4.98 9.14 4.03 2.94 5.33 ...
##  $ medv   : num  24 21.6 34.7 33.4 36.2 28.7 22.9 27.1 16.5 18.9 ...</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="년-3월.html#cb4-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb4-2"><a href="년-3월.html#cb4-2"></a>train.index &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(<span class="dt">y =</span> Boston<span class="op">$</span>medv, <span class="dt">p =</span> <span class="fl">0.7</span>, <span class="dt">list =</span> F)</span>
<span id="cb4-3"><a href="년-3월.html#cb4-3"></a>Boston.train &lt;-<span class="st"> </span>Boston[train.index, ]</span>
<span id="cb4-4"><a href="년-3월.html#cb4-4"></a>Boston.test &lt;-<span class="st"> </span>Boston[<span class="op">-</span>train.index, ]</span>
<span id="cb4-5"><a href="년-3월.html#cb4-5"></a>Boston.test.x &lt;-<span class="st"> </span><span class="kw">model.matrix</span>(medv <span class="op">~</span><span class="st"> </span>., Boston.test)[, <span class="dv">-1</span>]</span>
<span id="cb4-6"><a href="년-3월.html#cb4-6"></a>Boston.test.y &lt;-<span class="st"> </span>Boston.test<span class="op">$</span>medv</span>
<span id="cb4-7"><a href="년-3월.html#cb4-7"></a></span>
<span id="cb4-8"><a href="년-3월.html#cb4-8"></a>Boston.split &lt;-<span class="st">  </span><span class="kw">rbind</span>(<span class="dt">Train.Data =</span> <span class="kw">nrow</span>(Boston.train), <span class="dt">Test.Data =</span> <span class="kw">nrow</span>(Boston.test))</span>
<span id="cb4-9"><a href="년-3월.html#cb4-9"></a><span class="kw">colnames</span>(Boston.split) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Number&quot;</span>); Boston.split</span></code></pre></div>
<pre><code>##            Number
## Train.Data    356
## Test.Data     150</code></pre>
<p><code>glmnet</code> 패키지 내 <code>glmnet()</code> 함수를 통해 페널티 회귀분석을 수행할 수 있다. glmnet() 함수는 인자로 결과변수 y는 벡터로 예측변수 x는 행렬 형태로 제공해야 한다. 추가로 연속형 변수만 처리 가능하므로 범주형 변수는 사전에 더미변수로 변환해야 한다.</p>
<ul>
<li>family = 결과변수의 확률분포, gaussian, binomial 등</li>
<li>alpha = 0(Ridge), 1(Lasso), 0~1(ElasticNet)</li>
<li>lambda = 패널티 크기 조절, 예측오차를 최소화 하는 람다 설정, 교차검정을 통해 설정</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="년-3월.html#cb6-1"></a><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(glmnet)) {</span>
<span id="cb6-2"><a href="년-3월.html#cb6-2"></a>  <span class="kw">install.packages</span>(<span class="st">&quot;glmnet&quot;</span>)</span>
<span id="cb6-3"><a href="년-3월.html#cb6-3"></a>  <span class="kw">library</span>(glmnet)</span>
<span id="cb6-4"><a href="년-3월.html#cb6-4"></a>}</span></code></pre></div>
<pre><code>## 
## The downloaded binary packages are in
##  /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmpp6nXbK/downloaded_packages</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="년-3월.html#cb8-1"></a><span class="co"># 예측변수 행렬 + 더미변수 생성</span></span>
<span id="cb8-2"><a href="년-3월.html#cb8-2"></a>x &lt;-<span class="st"> </span><span class="kw">model.matrix</span>(medv <span class="op">~</span>., Boston.train)[, <span class="dv">-1</span>] <span class="co"># 불필요한 첫 번째 열 삭제</span></span>
<span id="cb8-3"><a href="년-3월.html#cb8-3"></a><span class="kw">head</span>(x)</span></code></pre></div>
<pre><code>##       crim   zn indus chas   nox    rm  age    dis rad tax ptratio  black lstat
## 1  0.00632 18.0  2.31    0 0.538 6.575 65.2 4.0900   1 296    15.3 396.90  4.98
## 4  0.03237  0.0  2.18    0 0.458 6.998 45.8 6.0622   3 222    18.7 394.63  2.94
## 10 0.17004 12.5  7.87    0 0.524 6.004 85.9 6.5921   5 311    15.2 386.71 17.10
## 12 0.11747 12.5  7.87    0 0.524 6.009 82.9 6.2267   5 311    15.2 396.90 13.27
## 13 0.09378 12.5  7.87    0 0.524 5.889 39.0 5.4509   5 311    15.2 390.50 15.71
## 16 0.62739  0.0  8.14    0 0.538 5.834 56.5 4.4986   4 307    21.0 395.62  8.47</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="년-3월.html#cb10-1"></a><span class="co"># 결과변수</span></span>
<span id="cb10-2"><a href="년-3월.html#cb10-2"></a>y &lt;-<span class="st"> </span>Boston.train<span class="op">$</span>medv</span></code></pre></div>
<div id="lasso-regression" class="section level4 hasAnchor">
<h4>Lasso Regression<a href="년-3월.html#lasso-regression" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="년-3월.html#cb11-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb11-2"><a href="년-3월.html#cb11-2"></a>Boston.cv &lt;-<span class="st"> </span><span class="kw">cv.glmnet</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="dt">alpha =</span> <span class="dv">1</span>) <span class="co"># Lasso</span></span>
<span id="cb11-3"><a href="년-3월.html#cb11-3"></a><span class="kw">plot</span>(Boston.cv)</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>왼쪽의 점선은 예측오차를 최소화하는, 즉 예측 정확도를 가장 크게하는 로그 람다값을 나타낸다. Lasso 회귀분석에서는 영향력이 작은 예측변수의 회귀계수를 0으로 만들어 제거할 수 있다. 우측 상단의 예측변수 개수에서 확인이 가능하다.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="년-3월.html#cb12-1"></a><span class="kw">cbind</span>(<span class="dt">lambda.min =</span> Boston.cv<span class="op">$</span>lambda.min, <span class="dt">lambda.min.log =</span> <span class="kw">log</span>(Boston.cv<span class="op">$</span>lambda.min))</span></code></pre></div>
<pre><code>##      lambda.min lambda.min.log
## [1,] 0.01189058      -4.432009</code></pre>
<p>예측 정확도와 모델 간명도를 고려하여 최소 예측 오차의 1개 표준편차 이내에 있으면서 예측변수의 개수를 최소화하는 람다를 제공한다.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="년-3월.html#cb14-1"></a><span class="kw">cbind</span>(<span class="dt">lambda.1se =</span> Boston.cv<span class="op">$</span>lambda<span class="fl">.1</span>se, <span class="dt">lambda.1se.log =</span> <span class="kw">log</span>(Boston.cv<span class="op">$</span>lambda<span class="fl">.1</span>se))</span></code></pre></div>
<pre><code>##      lambda.1se lambda.1se.log
## [1,]  0.3716657     -0.9897604</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="년-3월.html#cb16-1"></a><span class="kw">cbind</span>(<span class="dt">lambda.min =</span> <span class="kw">coef</span>(Boston.cv, Boston.cv<span class="op">$</span>lambda.min), <span class="dt">lambda.1se =</span> <span class="kw">coef</span>(Boston.cv, Boston.cv<span class="op">$</span>lambda<span class="fl">.1</span>se))</span></code></pre></div>
<pre><code>## 14 x 2 sparse Matrix of class &quot;dgCMatrix&quot;
##                        s1            s1
## (Intercept)  32.720731705 16.0297569500
## crim         -0.087271032 -0.0139981876
## zn            0.027462832  .           
## indus        -0.045858550 -0.0166198270
## chas          2.904607308  2.0413930420
## nox         -15.675976627 -2.5456625823
## rm            3.997011835  4.3113894194
## age           .            .           
## dis          -1.236733449 -0.2334310319
## rad           0.255230956  .           
## tax          -0.009918317 -0.0007771602
## ptratio      -0.920530277 -0.7681696792
## black         0.008606410  0.0061710231
## lstat        -0.481377769 -0.4700816156</code></pre>
<p>lambda.min은 1개의, lambda.1se는 3개의 예측변수가 제거되었다.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="년-3월.html#cb18-1"></a>Boston.gnet1 &lt;-<span class="st"> </span><span class="kw">glmnet</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, </span>
<span id="cb18-2"><a href="년-3월.html#cb18-2"></a>       <span class="dt">alpha =</span> <span class="dv">1</span>, <span class="co"># Lasso</span></span>
<span id="cb18-3"><a href="년-3월.html#cb18-3"></a>       <span class="dt">lambda =</span> Boston.cv<span class="op">$</span>lambda.min)</span>
<span id="cb18-4"><a href="년-3월.html#cb18-4"></a>Boston.pred1 &lt;-<span class="st"> </span><span class="kw">predict</span>(Boston.gnet1, <span class="dt">newx =</span> Boston.test.x)</span>
<span id="cb18-5"><a href="년-3월.html#cb18-5"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> Boston.pred1, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##      RMSE  Rsquared       MAE 
## 5.1150340 0.7197637 3.3091787</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="년-3월.html#cb20-1"></a>Boston.gnet2 &lt;-<span class="st"> </span><span class="kw">glmnet</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, </span>
<span id="cb20-2"><a href="년-3월.html#cb20-2"></a>       <span class="dt">alpha =</span> <span class="dv">1</span>, <span class="co"># Lasso</span></span>
<span id="cb20-3"><a href="년-3월.html#cb20-3"></a>       <span class="dt">lambda =</span> Boston.cv<span class="op">$</span>lambda<span class="fl">.1</span>se)</span>
<span id="cb20-4"><a href="년-3월.html#cb20-4"></a>Boston.pred2 &lt;-<span class="st"> </span><span class="kw">predict</span>(Boston.gnet2, <span class="dt">newx =</span> Boston.test.x)</span>
<span id="cb20-5"><a href="년-3월.html#cb20-5"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> Boston.pred2, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##      RMSE  Rsquared       MAE 
## 5.5656605 0.6795993 3.6151777</code></pre>
</div>
<div id="elasticnet-regression" class="section level4 hasAnchor">
<h4>ElasticNet Regression<a href="년-3월.html#elasticnet-regression" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>ElasticNet읜 L2-norm, L1-norm 페널티항을 설정해야 하므로 최적의 alpha값을 산출해야 한다. <em>caret</em> 패키지 내 <em>train()</em> 함수를 이용한다.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="년-3월.html#cb22-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb22-2"><a href="년-3월.html#cb22-2"></a>Boston.cv &lt;-<span class="st"> </span><span class="kw">train</span>(<span class="dt">form =</span> medv <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> Boston.train, <span class="dt">method =</span> <span class="st">&quot;glmnet&quot;</span>,</span>
<span id="cb22-3"><a href="년-3월.html#cb22-3"></a>                   <span class="dt">trControl =</span> <span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;cv&quot;</span>,</span>
<span id="cb22-4"><a href="년-3월.html#cb22-4"></a>                                            <span class="dt">number =</span> <span class="dv">10</span>),</span>
<span id="cb22-5"><a href="년-3월.html#cb22-5"></a>                   <span class="dt">tuneLength =</span> <span class="dv">10</span>)</span>
<span id="cb22-6"><a href="년-3월.html#cb22-6"></a></span>
<span id="cb22-7"><a href="년-3월.html#cb22-7"></a>Boston.cv<span class="op">$</span>bestTune</span></code></pre></div>
<pre><code>##   alpha    lambda
## 6   0.1 0.2020812</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="년-3월.html#cb24-1"></a>Boston.gnet &lt;-<span class="st"> </span><span class="kw">glmnet</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, </span>
<span id="cb24-2"><a href="년-3월.html#cb24-2"></a>       <span class="dt">alpha =</span> Boston.cv<span class="op">$</span>bestTune<span class="op">$</span>alpha, </span>
<span id="cb24-3"><a href="년-3월.html#cb24-3"></a>       <span class="dt">lambda =</span> Boston.cv<span class="op">$</span>bestTune<span class="op">$</span>lambda)</span>
<span id="cb24-4"><a href="년-3월.html#cb24-4"></a><span class="kw">coef</span>(Boston.gnet)</span></code></pre></div>
<pre><code>## 14 x 1 sparse Matrix of class &quot;dgCMatrix&quot;
##                        s0
## (Intercept)  29.766401348
## crim         -0.078819914
## zn            0.021807176
## indus        -0.064680920
## chas          2.966225220
## nox         -13.617871871
## rm            4.056442437
## age           .          
## dis          -1.097715391
## rad           0.194940136
## tax          -0.007343684
## ptratio      -0.891291598
## black         0.008443963
## lstat        -0.466614849</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="년-3월.html#cb26-1"></a>Boston.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(Boston.gnet, <span class="dt">newx =</span> Boston.test.x)</span>
<span id="cb26-2"><a href="년-3월.html#cb26-2"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> Boston.pred, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##      RMSE  Rsquared       MAE 
## 5.1766444 0.7148912 3.3115941</code></pre>
</div>
</div>
<div id="모델별-비교" class="section level3 hasAnchor">
<h3>모델별 비교<a href="년-3월.html#모델별-비교" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="년-3월.html#cb28-1"></a>lambda &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dt">length =</span> <span class="dv">100</span>)</span>
<span id="cb28-2"><a href="년-3월.html#cb28-2"></a></span>
<span id="cb28-3"><a href="년-3월.html#cb28-3"></a><span class="co"># ridge</span></span>
<span id="cb28-4"><a href="년-3월.html#cb28-4"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb28-5"><a href="년-3월.html#cb28-5"></a>ridge &lt;-<span class="st"> </span><span class="kw">train</span>(<span class="dt">form =</span> medv <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> Boston.train, <span class="dt">method =</span> <span class="st">&quot;glmnet&quot;</span>,</span>
<span id="cb28-6"><a href="년-3월.html#cb28-6"></a>               <span class="dt">trControl =</span> <span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;cv&quot;</span>,</span>
<span id="cb28-7"><a href="년-3월.html#cb28-7"></a>                                        <span class="dt">number =</span> <span class="dv">10</span>),</span>
<span id="cb28-8"><a href="년-3월.html#cb28-8"></a>               <span class="dt">tuneGrid =</span> <span class="kw">expand.grid</span>(<span class="dt">alpha =</span> <span class="dv">0</span>, <span class="dt">lambda =</span> lambda))</span>
<span id="cb28-9"><a href="년-3월.html#cb28-9"></a><span class="kw">coef</span>(ridge<span class="op">$</span>finalModel, ridge<span class="op">$</span>bestTune<span class="op">$</span>lambda)</span></code></pre></div>
<pre><code>## 14 x 1 sparse Matrix of class &quot;dgCMatrix&quot;
##                        s1
## (Intercept)  26.531756149
## crim         -0.074428914
## zn            0.017800440
## indus        -0.084013662
## chas          3.079990715
## nox         -10.929321371
## rm            4.075749392
## age          -0.003350370
## dis          -0.950562016
## rad           0.143524673
## tax          -0.005528583
## ptratio      -0.844792464
## black         0.008418506
## lstat        -0.433322899</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="년-3월.html#cb30-1"></a>ridge.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(ridge, Boston.test)</span>
<span id="cb30-2"><a href="년-3월.html#cb30-2"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> ridge.pred, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##      RMSE  Rsquared       MAE 
## 5.2697535 0.7078302 3.3430299</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="년-3월.html#cb32-1"></a><span class="co"># lasso</span></span>
<span id="cb32-2"><a href="년-3월.html#cb32-2"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb32-3"><a href="년-3월.html#cb32-3"></a>lasso &lt;-<span class="st"> </span><span class="kw">train</span>(<span class="dt">form =</span> medv <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> Boston.train, <span class="dt">method =</span> <span class="st">&quot;glmnet&quot;</span>,</span>
<span id="cb32-4"><a href="년-3월.html#cb32-4"></a>               <span class="dt">trControl =</span> <span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;cv&quot;</span>,</span>
<span id="cb32-5"><a href="년-3월.html#cb32-5"></a>                                        <span class="dt">number =</span> <span class="dv">10</span>),</span>
<span id="cb32-6"><a href="년-3월.html#cb32-6"></a>               <span class="dt">tuneGrid =</span> <span class="kw">expand.grid</span>(<span class="dt">alpha =</span> <span class="dv">1</span>, <span class="dt">lambda =</span> lambda))</span>
<span id="cb32-7"><a href="년-3월.html#cb32-7"></a><span class="kw">coef</span>(lasso<span class="op">$</span>finalModel, lasso<span class="op">$</span>bestTune<span class="op">$</span>lambda)</span></code></pre></div>
<pre><code>## 14 x 1 sparse Matrix of class &quot;dgCMatrix&quot;
##                        s1
## (Intercept)  27.091673886
## crim         -0.057263747
## zn            0.011752233
## indus        -0.060580843
## chas          2.817475257
## nox         -11.877653738
## rm            4.155604866
## age           .          
## dis          -0.934714973
## rad           0.114348391
## tax          -0.004015459
## ptratio      -0.877240341
## black         0.007739894
## lstat        -0.477162631</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="년-3월.html#cb34-1"></a>lasso.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(lasso, Boston.test)</span>
<span id="cb34-2"><a href="년-3월.html#cb34-2"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> lasso.pred, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##     RMSE Rsquared      MAE 
## 5.245637 0.708739 3.362308</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="년-3월.html#cb36-1"></a><span class="co"># lasso</span></span>
<span id="cb36-2"><a href="년-3월.html#cb36-2"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb36-3"><a href="년-3월.html#cb36-3"></a>elastic &lt;-<span class="st"> </span><span class="kw">train</span>(<span class="dt">form =</span> medv <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> Boston.train, <span class="dt">method =</span> <span class="st">&quot;glmnet&quot;</span>,</span>
<span id="cb36-4"><a href="년-3월.html#cb36-4"></a>               <span class="dt">trControl =</span> <span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;cv&quot;</span>,</span>
<span id="cb36-5"><a href="년-3월.html#cb36-5"></a>                                        <span class="dt">number =</span> <span class="dv">10</span>),</span>
<span id="cb36-6"><a href="년-3월.html#cb36-6"></a>               <span class="dt">tuneLength =</span> <span class="dv">10</span>)</span>
<span id="cb36-7"><a href="년-3월.html#cb36-7"></a><span class="kw">coef</span>(elastic<span class="op">$</span>finalModel, elastic<span class="op">$</span>bestTune<span class="op">$</span>lambda)</span></code></pre></div>
<pre><code>## 14 x 1 sparse Matrix of class &quot;dgCMatrix&quot;
##                        s1
## (Intercept)  29.765523097
## crim         -0.078486897
## zn            0.021723671
## indus        -0.064825528
## chas          2.965478459
## nox         -13.585240410
## rm            4.054072843
## age           .          
## dis          -1.097151673
## rad           0.194485494
## tax          -0.007329651
## ptratio      -0.891156341
## black         0.008442569
## lstat        -0.467123628</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="년-3월.html#cb38-1"></a>elastic.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(elastic, Boston.test)</span>
<span id="cb38-2"><a href="년-3월.html#cb38-2"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> elastic.pred, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##      RMSE  Rsquared       MAE 
## 5.1769223 0.7148754 3.3120692</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="년-3월.html#cb40-1"></a>models &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">ridge =</span> ridge, <span class="dt">lasso =</span> lasso, <span class="dt">elastic =</span> elastic)</span>
<span id="cb40-2"><a href="년-3월.html#cb40-2"></a><span class="kw">summary</span>(<span class="kw">resamples</span>(models))</span></code></pre></div>
<pre><code>## 
## Call:
## summary.resamples(object = resamples(models))
## 
## Models: ridge, lasso, elastic 
## Number of resamples: 10 
## 
## MAE 
##             Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA&#39;s
## ridge   2.314983 3.095864 3.358949 3.350092 3.553519 4.758853    0
## lasso   2.334122 3.113956 3.355747 3.384424 3.536837 4.889416    0
## elastic 2.370271 3.091582 3.351099 3.369054 3.544919 4.741635    0
## 
## RMSE 
##             Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA&#39;s
## ridge   3.217597 4.220445 4.527056 4.702958 5.047501 6.966902    0
## lasso   3.259155 4.242220 4.489430 4.744627 5.168922 7.113506    0
## elastic 3.323486 4.222079 4.511393 4.699214 5.056862 6.952270    0
## 
## Rsquared 
##              Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA&#39;s
## ridge   0.5685060 0.7102964 0.7569726 0.7432102 0.7896808 0.8415753    0
## lasso   0.5567794 0.6909231 0.7576300 0.7387044 0.7934118 0.8391494    0
## elastic 0.5743693 0.7076979 0.7608565 0.7432037 0.7831245 0.8450374    0</code></pre>
<p>세 모델이 RMSE 관점에서 비슷한 성능을 보이는 것 같다. 통계적으로 유의한 차이가 있는지 검정해 본다.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="년-3월.html#cb42-1"></a><span class="kw">summary</span>(<span class="kw">diff</span>(<span class="kw">resamples</span>(models), <span class="dt">metric=</span><span class="st">&quot;RMSE&quot;</span>))</span></code></pre></div>
<pre><code>## 
## Call:
## summary.diff.resamples(object = diff(resamples(models), metric = &quot;RMSE&quot;))
## 
## p-value adjustment: bonferroni 
## Upper diagonal: estimates of the difference
## Lower diagonal: p-value for H0: difference = 0
## 
## RMSE 
##         ridge  lasso     elastic  
## ridge          -0.041669  0.003744
## lasso   0.7838            0.045413
## elastic 1.0000 0.6350</code></pre>
<p>행렬의 대각선 위쪽은 모델간 차이, 아래쪽은 유의확률을 나타낸다. 세 모델 간 통계적 유의한 차이는 없는 것으로 확인된다. 따라서 간명도 관점에서 예측변수의 개수가 적은 모델을 선택하는 것이 바람직하다.</p>
</div>
</div>
<div id="til20220316" class="section level2 hasAnchor">
<h2>TIL20220316<a href="년-3월.html#til20220316" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="페널티-회귀분석---1" class="section level3 hasAnchor">
<h3>페널티 회귀분석 - 1<a href="년-3월.html#페널티-회귀분석---1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>페널티 회귀분석(penalized regression analysis)</strong><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<ul>
<li>릿지 (Ridge)<br />
회귀계수를 0에 가깝게 만듬(모든 변수 사용), 독립변수의 회귀계수가 비슷한 경우 우수</li>
<li>라소 (Lasso)<br />
설명력에 기여하지 못하는 독립변수의 회귀계수를 0으로 만듬(간명한 모델), 독립변수의 회귀변수간 차이가 클 때 우수</li>
<li>일래스틱넷 (ElasticNet), 릿지 + 라소</li>
</ul>
<p>지나치게많은 독립변수를 갖는 모델에 페널티를 부과하는 방식으로 보다 간명한 회귀모델을 생성할 수 있다. 모델의 성능에 크게 기여하지 못하는 변수의 영향력을 축소(Lasso)하거나 모델에서 제거(Ridge)한다. 최소자승법에 의한 잔차(=관측값-예측값)의 제곱합과 페널티항의 합이 최소가 되도록 회귀계수를 추정한다.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="년-3월.html#cb44-1"></a><span class="kw">str</span>(Boston)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    506 obs. of  14 variables:
##  $ crim   : num  0.00632 0.02731 0.02729 0.03237 0.06905 ...
##  $ zn     : num  18 0 0 0 0 0 12.5 12.5 12.5 12.5 ...
##  $ indus  : num  2.31 7.07 7.07 2.18 2.18 2.18 7.87 7.87 7.87 7.87 ...
##  $ chas   : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ nox    : num  0.538 0.469 0.469 0.458 0.458 0.458 0.524 0.524 0.524 0.524 ...
##  $ rm     : num  6.58 6.42 7.18 7 7.15 ...
##  $ age    : num  65.2 78.9 61.1 45.8 54.2 58.7 66.6 96.1 100 85.9 ...
##  $ dis    : num  4.09 4.97 4.97 6.06 6.06 ...
##  $ rad    : int  1 2 2 3 3 3 5 5 5 5 ...
##  $ tax    : num  296 242 242 222 222 222 311 311 311 311 ...
##  $ ptratio: num  15.3 17.8 17.8 18.7 18.7 18.7 15.2 15.2 15.2 15.2 ...
##  $ black  : num  397 397 393 395 397 ...
##  $ lstat  : num  4.98 9.14 4.03 2.94 5.33 ...
##  $ medv   : num  24 21.6 34.7 33.4 36.2 28.7 22.9 27.1 16.5 18.9 ...</code></pre>
<p><code>glmnet</code> 패키지 내 <code>glmnet()</code> 함수를 통해 페널티 회귀분석을 수행할 수 있다. glmnet() 함수는 인자로 결과변수 y는 벡터로 예측변수 x는 행렬 형태로 제공해야 한다. 추가로 연속형 변수만 처리 가능하므로 범주형 변수는 사전에 더미변수로 변환해야 한다.</p>
<ul>
<li>family = 결과변수의 확률분포, gaussian, binomial 등</li>
<li>alpha = 0(Ridge), 1(Lasso), 0~1(ElasticNet)</li>
<li>lambda = 패널티 크기 조절, 예측오차를 최소화 하는 람다 설정, 교차검정을 통해 설정</li>
</ul>
<div id="ridge-regression" class="section level4 hasAnchor">
<h4>Ridge Regression<a href="년-3월.html#ridge-regression" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="년-3월.html#cb46-1"></a><span class="co"># 최적의 람다 계산</span></span>
<span id="cb46-2"><a href="년-3월.html#cb46-2"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb46-3"><a href="년-3월.html#cb46-3"></a>Boston.cv &lt;-<span class="st"> </span><span class="kw">cv.glmnet</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="dt">alpha =</span> <span class="dv">0</span>) <span class="co"># Ridge</span></span>
<span id="cb46-4"><a href="년-3월.html#cb46-4"></a><span class="kw">plot</span>(Boston.cv)</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-21-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>왼쪽의 점선은 최적 람다의 로그 값, 상단의 숫자는 예측변수의 개수, Ridge 회귀분석은 회귀계수를 0으로 만들지 않기 때문에 예측변수 개수가 줄어들지 않는다.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="년-3월.html#cb47-1"></a><span class="kw">str</span>(Boston.cv)</span></code></pre></div>
<pre><code>## List of 12
##  $ lambda    : num [1:100] 6648 6057 5519 5029 4582 ...
##  $ cvm       : num [1:100] 81.3 80.7 80.6 80.5 80.5 ...
##  $ cvsd      : num [1:100] 4.66 4.63 4.61 4.61 4.6 ...
##  $ cvup      : num [1:100] 85.9 85.3 85.2 85.1 85.1 ...
##  $ cvlo      : num [1:100] 76.6 76.1 76 75.9 75.8 ...
##  $ nzero     : Named int [1:100] 13 13 13 13 13 13 13 13 13 13 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:100] &quot;s0&quot; &quot;s1&quot; &quot;s2&quot; &quot;s3&quot; ...
##  $ call      : language cv.glmnet(x = x, y = y, family = &quot;gaussian&quot;, alpha = 0)
##  $ name      : Named chr &quot;Mean-Squared Error&quot;
##   ..- attr(*, &quot;names&quot;)= chr &quot;mse&quot;
##  $ glmnet.fit:List of 12
##   ..$ a0       : Named num [1:100] 22.4 22.5 22.5 22.5 22.5 ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:100] &quot;s0&quot; &quot;s1&quot; &quot;s2&quot; &quot;s3&quot; ...
##   ..$ beta     :Formal class &#39;dgCMatrix&#39; [package &quot;Matrix&quot;] with 6 slots
##   .. .. ..@ i       : int [1:1300] 0 1 2 3 4 5 6 7 8 9 ...
##   .. .. ..@ p       : int [1:101] 0 13 26 39 52 65 78 91 104 117 ...
##   .. .. ..@ Dim     : int [1:2] 13 100
##   .. .. ..@ Dimnames:List of 2
##   .. .. .. ..$ : chr [1:13] &quot;crim&quot; &quot;zn&quot; &quot;indus&quot; &quot;chas&quot; ...
##   .. .. .. ..$ : chr [1:100] &quot;s0&quot; &quot;s1&quot; &quot;s2&quot; &quot;s3&quot; ...
##   .. .. ..@ x       : num [1:1300] -4.24e-37 1.27e-37 -6.75e-37 6.90e-36 -3.46e-35 ...
##   .. .. ..@ factors : list()
##   ..$ df       : int [1:100] 13 13 13 13 13 13 13 13 13 13 ...
##   ..$ dim      : int [1:2] 13 100
##   ..$ lambda   : num [1:100] 6648 6057 5519 5029 4582 ...
##   ..$ dev.ratio: num [1:100] 5.72e-36 8.32e-03 9.12e-03 1.00e-02 1.10e-02 ...
##   ..$ nulldev  : num 28877
##   ..$ npasses  : int 452
##   ..$ jerr     : int 0
##   ..$ offset   : logi FALSE
##   ..$ call     : language glmnet(x = x, y = y, family = &quot;gaussian&quot;, alpha = 0)
##   ..$ nobs     : int 356
##   ..- attr(*, &quot;class&quot;)= chr [1:2] &quot;elnet&quot; &quot;glmnet&quot;
##  $ lambda.min: num 0.665
##  $ lambda.1se: num 3.89
##  $ index     : int [1:2, 1] 100 81
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:2] &quot;min&quot; &quot;1se&quot;
##   .. ..$ : chr &quot;Lambda&quot;
##  - attr(*, &quot;class&quot;)= chr &quot;cv.glmnet&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="년-3월.html#cb49-1"></a><span class="kw">cbind</span>(<span class="dt">lambda.min =</span> Boston.cv<span class="op">$</span>lambda.min, <span class="dt">lambda.min.log =</span> <span class="kw">log</span>(Boston.cv<span class="op">$</span>lambda.min))</span></code></pre></div>
<pre><code>##      lambda.min lambda.min.log
## [1,]  0.6647797     -0.4082995</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="년-3월.html#cb51-1"></a>Boston.gnet &lt;-<span class="st"> </span><span class="kw">glmnet</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y, <span class="dt">family =</span> <span class="st">&quot;gaussian&quot;</span>, </span>
<span id="cb51-2"><a href="년-3월.html#cb51-2"></a>       <span class="dt">alpha =</span> <span class="dv">0</span>, <span class="co"># Ridge</span></span>
<span id="cb51-3"><a href="년-3월.html#cb51-3"></a>       <span class="dt">lambda =</span> Boston.cv<span class="op">$</span>lambda.min)</span>
<span id="cb51-4"><a href="년-3월.html#cb51-4"></a><span class="kw">coef</span>(Boston.gnet)</span></code></pre></div>
<pre><code>## 14 x 1 sparse Matrix of class &quot;dgCMatrix&quot;
##                        s0
## (Intercept)  26.562458173
## crim         -0.074637662
## zn            0.017675831
## indus        -0.084095173
## chas          3.084971492
## nox         -11.016754020
## rm            4.080060454
## age          -0.003541674
## dis          -0.951812086
## rad           0.143586748
## tax          -0.005498664
## ptratio      -0.845505137
## black         0.008415669
## lstat        -0.432346168</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="년-3월.html#cb53-1"></a>Boston.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(Boston.gnet, <span class="dt">newx =</span> Boston.test.x)</span>
<span id="cb53-2"><a href="년-3월.html#cb53-2"></a><span class="kw">head</span>(Boston.pred)</span></code></pre></div>
<pre><code>##         s0
## 2 25.28493
## 3 30.64018
## 5 28.96135
## 6 26.05142
## 7 23.45445
## 8 20.73295</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="년-3월.html#cb55-1"></a><span class="kw">postResample</span>(<span class="dt">pred =</span> Boston.pred, <span class="dt">obs =</span> Boston.test.y)</span></code></pre></div>
<pre><code>##     RMSE Rsquared      MAE 
## 5.270168 0.707766 3.343058</code></pre>
<p>RMSE와 MAE는 오차 지표로 값이 작을수록, Rsquared는 모델의 설명력 지표로 값이 클수록 우수한 모델이다.</p>
</div>
</div>
<div id="markdown-문법" class="section level3 hasAnchor">
<h3>Markdown 문법<a href="년-3월.html#markdown-문법" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://daringfireball.net/projects/markdown/syntax#p" class="uri">https://daringfireball.net/projects/markdown/syntax#p</a></p>

</div>
</div>
<div id="til20220315" class="section level2 hasAnchor">
<h2>TIL20220315<a href="년-3월.html#til20220315" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="caret을-이용한-기계학습-절차" class="section level3 hasAnchor">
<h3>caret을 이용한 기계학습 절차<a href="년-3월.html#caret을-이용한-기계학습-절차" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>데이터 전처리</li>
<li>데이터 분할</li>
<li>학습</li>
<li>성능평가</li>
<li>하이퍼 파라메터 튜닝</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="년-3월.html#cb57-1"></a><span class="co"># 0. 데이터 준비</span></span>
<span id="cb57-2"><a href="년-3월.html#cb57-2"></a><span class="kw">data</span>(<span class="st">&quot;penguins&quot;</span>)</span>
<span id="cb57-3"><a href="년-3월.html#cb57-3"></a><span class="kw">str</span>(penguins)</span></code></pre></div>
<pre><code>## tibble [344 × 8] (S3: tbl_df/tbl/data.frame)
##  $ species          : Factor w/ 3 levels &quot;Adelie&quot;,&quot;Chinstrap&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ island           : Factor w/ 3 levels &quot;Biscoe&quot;,&quot;Dream&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
##  $ bill_depth_mm    : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
##  $ flipper_length_mm: int [1:344] 181 186 195 NA 193 190 181 195 193 190 ...
##  $ body_mass_g      : int [1:344] 3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...
##  $ sex              : Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 2 1 1 NA 1 2 1 2 NA NA ...
##  $ year             : int [1:344] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="년-3월.html#cb59-1"></a><span class="kw">summary</span>(penguins)</span></code></pre></div>
<pre><code>##       species          island    bill_length_mm  bill_depth_mm  
##  Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
##  Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
##  Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
##                                  Mean   :43.92   Mean   :17.15  
##                                  3rd Qu.:48.50   3rd Qu.:18.70  
##                                  Max.   :59.60   Max.   :21.50  
##                                  NA&#39;s   :2       NA&#39;s   :2      
##  flipper_length_mm  body_mass_g       sex           year     
##  Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
##  1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
##  Median :197.0     Median :4050   NA&#39;s  : 11   Median :2008  
##  Mean   :200.9     Mean   :4202                Mean   :2008  
##  3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
##  Max.   :231.0     Max.   :6300                Max.   :2009  
##  NA&#39;s   :2         NA&#39;s   :2</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="년-3월.html#cb61-1"></a><span class="co"># 1. 데이터 전처리</span></span>
<span id="cb61-2"><a href="년-3월.html#cb61-2"></a></span>
<span id="cb61-3"><a href="년-3월.html#cb61-3"></a><span class="kw">library</span>(mice)</span>
<span id="cb61-4"><a href="년-3월.html#cb61-4"></a>penguins.preprocessing &lt;-<span class="st"> </span><span class="kw">mice</span>(penguins, <span class="dt">m=</span><span class="dv">1</span>, <span class="dt">print=</span>F)</span>
<span id="cb61-5"><a href="년-3월.html#cb61-5"></a></span>
<span id="cb61-6"><a href="년-3월.html#cb61-6"></a><span class="co"># 결측치 처리</span></span>
<span id="cb61-7"><a href="년-3월.html#cb61-7"></a>data &lt;-<span class="st"> </span><span class="kw">complete</span>(penguins.preprocessing)</span>
<span id="cb61-8"><a href="년-3월.html#cb61-8"></a></span>
<span id="cb61-9"><a href="년-3월.html#cb61-9"></a><span class="co"># 수치형 변수 정규화</span></span>
<span id="cb61-10"><a href="년-3월.html#cb61-10"></a>data[, <span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)] &lt;-<span class="st"> </span><span class="kw">scale</span>(data[, <span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)])</span>
<span id="cb61-11"><a href="년-3월.html#cb61-11"></a></span>
<span id="cb61-12"><a href="년-3월.html#cb61-12"></a><span class="co"># 년도 범주로 변환</span></span>
<span id="cb61-13"><a href="년-3월.html#cb61-13"></a>data<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw">as.factor</span>(data<span class="op">$</span>year)</span></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="년-3월.html#cb62-1"></a><span class="kw">summary</span>(data)</span></code></pre></div>
<pre><code>##       species          island    bill_length_mm    bill_depth_mm     
##  Adelie   :152   Biscoe   :168   Min.   :-2.1655   Min.   :-2.04700  
##  Chinstrap: 68   Dream    :124   1st Qu.:-0.8652   1st Qu.:-0.79498  
##  Gentoo   :124   Torgersen: 52   Median : 0.0962   Median : 0.07764  
##                                  Mean   : 0.0000   Mean   : 0.00000  
##                                  3rd Qu.: 0.8379   3rd Qu.: 0.78586  
##                                  Max.   : 2.8707   Max.   : 2.20229  
##  flipper_length_mm  body_mass_g          sex        year    
##  Min.   :-2.0578   Min.   :-1.8752   female:172   2007:110  
##  1st Qu.:-0.7762   1st Qu.:-0.8156   male  :172   2008:114  
##  Median :-0.2778   Median :-0.1922                2009:120  
##  Mean   : 0.0000   Mean   : 0.0000                          
##  3rd Qu.: 0.8614   3rd Qu.: 0.6882                          
##  Max.   : 2.1431   Max.   : 2.6126</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="년-3월.html#cb64-1"></a><span class="co"># 2. 데이터 분할</span></span>
<span id="cb64-2"><a href="년-3월.html#cb64-2"></a>train.index &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(data<span class="op">$</span>sex, <span class="dt">p=</span><span class="fl">0.7</span>, <span class="dt">list=</span>F)</span>
<span id="cb64-3"><a href="년-3월.html#cb64-3"></a>data.train &lt;-<span class="st"> </span>data[train.index, ]</span>
<span id="cb64-4"><a href="년-3월.html#cb64-4"></a>data.test &lt;-<span class="st"> </span>data[<span class="op">-</span>train.index, ]</span>
<span id="cb64-5"><a href="년-3월.html#cb64-5"></a></span>
<span id="cb64-6"><a href="년-3월.html#cb64-6"></a><span class="kw">addmargins</span>(<span class="kw">rbind</span>(</span>
<span id="cb64-7"><a href="년-3월.html#cb64-7"></a>  <span class="dt">TrainSet =</span> <span class="kw">table</span>(data.train<span class="op">$</span>sex),</span>
<span id="cb64-8"><a href="년-3월.html#cb64-8"></a>  <span class="dt">TestSet =</span> <span class="kw">table</span>(data.test<span class="op">$</span>sex)</span>
<span id="cb64-9"><a href="년-3월.html#cb64-9"></a>),<span class="dv">2</span>)</span></code></pre></div>
<pre><code>##          female male Sum
## TrainSet    121  121 242
## TestSet      51   51 102</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="년-3월.html#cb66-1"></a><span class="co"># 3. 학습</span></span>
<span id="cb66-2"><a href="년-3월.html#cb66-2"></a>fitControl &lt;-<span class="st"> </span><span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;repeatedcv&quot;</span>, <span class="dt">repeats =</span> <span class="dv">5</span>)</span>
<span id="cb66-3"><a href="년-3월.html#cb66-3"></a>model.rf &lt;-<span class="st"> </span><span class="kw">train</span>(sex <span class="op">~</span><span class="st"> </span>., <span class="dt">data=</span>data.train, <span class="dt">method =</span> <span class="st">&quot;rf&quot;</span>, <span class="dt">trControl =</span> fitControl); model.rf</span></code></pre></div>
<pre><code>## Error: Required packages are missing: randomForest</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;model.rf&#39; not found</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="년-3월.html#cb69-1"></a><span class="co"># 4. 성능평가</span></span>
<span id="cb69-2"><a href="년-3월.html#cb69-2"></a>model.rf.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(model.rf, <span class="dt">newdata =</span> data.test)</span></code></pre></div>
<pre><code>## Error in predict(model.rf, newdata = data.test): object &#39;model.rf&#39; not found</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="년-3월.html#cb71-1"></a>model.rf.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(model.rf.pred, data.test<span class="op">$</span>sex); model.rf.cm</span></code></pre></div>
<pre><code>## Error in confusionMatrix(model.rf.pred, data.test$sex): object &#39;model.rf.pred&#39; not found</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;model.rf.cm&#39; not found</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="년-3월.html#cb74-1"></a><span class="co"># 5. 하이퍼 파라메터 튜닝</span></span>
<span id="cb74-2"><a href="년-3월.html#cb74-2"></a></span>
<span id="cb74-3"><a href="년-3월.html#cb74-3"></a><span class="co">## 5-1. custom search grid</span></span>
<span id="cb74-4"><a href="년-3월.html#cb74-4"></a>customGrid &lt;-<span class="st"> </span><span class="kw">expand.grid</span>(<span class="dt">mtry =</span> <span class="dv">1</span><span class="op">:</span>(<span class="kw">dim</span>(data.train)[<span class="dv">2</span>]<span class="op">-</span><span class="dv">1</span>))</span>
<span id="cb74-5"><a href="년-3월.html#cb74-5"></a>model.rf.tuned &lt;-<span class="st"> </span><span class="kw">train</span>(sex <span class="op">~</span><span class="st"> </span>., <span class="dt">data=</span>data.train, <span class="dt">method =</span> <span class="st">&quot;rf&quot;</span>, </span>
<span id="cb74-6"><a href="년-3월.html#cb74-6"></a>                        <span class="dt">trControl =</span> fitControl,</span>
<span id="cb74-7"><a href="년-3월.html#cb74-7"></a>                        <span class="dt">tuneGrid =</span> customGrid); model.rf.tuned</span></code></pre></div>
<pre><code>## Error: Required packages are missing: randomForest</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;model.rf.tuned&#39; not found</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="년-3월.html#cb77-1"></a>model.rf.tuned.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(model.rf.tuned, <span class="dt">newdata =</span> data.test)</span></code></pre></div>
<pre><code>## Error in predict(model.rf.tuned, newdata = data.test): object &#39;model.rf.tuned&#39; not found</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="년-3월.html#cb79-1"></a>model.rf.tuned.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(model.rf.tuned.pred, data.test<span class="op">$</span>sex); model.rf.tuned.cm</span></code></pre></div>
<pre><code>## Error in confusionMatrix(model.rf.tuned.pred, data.test$sex): object &#39;model.rf.tuned.pred&#39; not found</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;model.rf.tuned.cm&#39; not found</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="년-3월.html#cb82-1"></a><span class="co"># 5-2. Random Search Grid</span></span>
<span id="cb82-2"><a href="년-3월.html#cb82-2"></a>fitControl.random &lt;-<span class="st"> </span><span class="kw">trainControl</span>(<span class="dt">method =</span> <span class="st">&quot;repeatedcv&quot;</span>, <span class="dt">repeats =</span> <span class="dv">5</span>, <span class="dt">search =</span> <span class="st">&quot;random&quot;</span>)</span>
<span id="cb82-3"><a href="년-3월.html#cb82-3"></a>model.rf.tuned2 &lt;-<span class="st"> </span><span class="kw">train</span>(sex <span class="op">~</span><span class="st"> </span>., <span class="dt">data=</span>data.train, <span class="dt">method =</span> <span class="st">&quot;rf&quot;</span>, </span>
<span id="cb82-4"><a href="년-3월.html#cb82-4"></a>                        <span class="dt">trControl =</span> fitControl.random,</span>
<span id="cb82-5"><a href="년-3월.html#cb82-5"></a>                        <span class="dt">tuneLength =</span> <span class="dv">10</span>); model.rf.tuned2</span></code></pre></div>
<pre><code>## Error: Required packages are missing: randomForest</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;model.rf.tuned2&#39; not found</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="년-3월.html#cb85-1"></a>model.rf.tuned2.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(model.rf.tuned2, <span class="dt">newdata =</span> data.test)</span></code></pre></div>
<pre><code>## Error in predict(model.rf.tuned2, newdata = data.test): object &#39;model.rf.tuned2&#39; not found</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="년-3월.html#cb87-1"></a>model.rf.tuned2.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(model.rf.tuned2.pred, data.test<span class="op">$</span>sex); model.rf.tuned2.cm</span></code></pre></div>
<pre><code>## Error in confusionMatrix(model.rf.tuned2.pred, data.test$sex): object &#39;model.rf.tuned2.pred&#39; not found</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;model.rf.tuned2.cm&#39; not found</code></pre>
</div>
</div>
<div id="til20220314" class="section level2 hasAnchor">
<h2>TIL20220314<a href="년-3월.html#til20220314" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>데이터 분할, 이건 내일 정리하자. 양이 많네.</p>
<div id="일반적인-데이터-분할" class="section level3 hasAnchor">
<h3>일반적인 데이터 분할<a href="년-3월.html#일반적인-데이터-분할" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="년-3월.html#cb90-1"></a>trainIndex &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(penguins<span class="op">$</span>species, <span class="dt">p=</span>.<span class="dv">7</span>, <span class="dt">list=</span>F)</span>
<span id="cb90-2"><a href="년-3월.html#cb90-2"></a>pTrain &lt;-<span class="st"> </span>penguins[trainIndex, ]</span>
<span id="cb90-3"><a href="년-3월.html#cb90-3"></a>pTest &lt;-<span class="st"> </span>penguins[<span class="op">-</span>trainIndex, ]</span>
<span id="cb90-4"><a href="년-3월.html#cb90-4"></a><span class="kw">addmargins</span>(<span class="kw">addmargins</span>(<span class="kw">rbind</span>(</span>
<span id="cb90-5"><a href="년-3월.html#cb90-5"></a>  <span class="dt">pTrain =</span> <span class="kw">table</span>(pTrain<span class="op">$</span>species),</span>
<span id="cb90-6"><a href="년-3월.html#cb90-6"></a>  <span class="dt">pTest =</span> <span class="kw">table</span>(pTest<span class="op">$</span>species)</span>
<span id="cb90-7"><a href="년-3월.html#cb90-7"></a>),<span class="dv">2</span>),<span class="dv">1</span>)</span></code></pre></div>
<pre><code>##        Adelie Chinstrap Gentoo Sum
## pTrain    107        48     87 242
## pTest      45        20     37 102
## Sum       152        68    124 344</code></pre>
</div>
</div>
<div id="til20220313" class="section level2 hasAnchor">
<h2>TIL20220313<a href="년-3월.html#til20220313" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="시계열-데이터-분할" class="section level3 hasAnchor">
<h3>시계열 데이터 분할<a href="년-3월.html#시계열-데이터-분할" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>출처: 시계열 데이터 - 항공여객(Air Passenger) 데이터<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>시계열은 일반적인 방법으로 표본상에서 랜덤하게 원소를 추출할 수 없다. 시간 흐름을 고려하여 훈련 데이터와 시험 데이터로 분할해야 한다.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="년-3월.html#cb92-1"></a>train =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">18</span></span>
<span id="cb92-2"><a href="년-3월.html#cb92-2"></a>test =<span class="st"> </span><span class="dv">19</span><span class="op">:</span><span class="dv">24</span></span>
<span id="cb92-3"><a href="년-3월.html#cb92-3"></a><span class="kw">par</span>(<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb92-4"><a href="년-3월.html#cb92-4"></a>{<span class="kw">plot</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">26</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),<span class="dt">xaxt=</span><span class="st">&quot;n&quot;</span>,<span class="dt">yaxt=</span><span class="st">&quot;n&quot;</span>,<span class="dt">bty=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlab=</span><span class="st">&quot;&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;&quot;</span>,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>)</span>
<span id="cb92-5"><a href="년-3월.html#cb92-5"></a><span class="kw">arrows</span>(<span class="dv">0</span>,<span class="fl">0.5</span>,<span class="dv">25</span>,<span class="fl">0.5</span>,<span class="fl">0.05</span>)</span>
<span id="cb92-6"><a href="년-3월.html#cb92-6"></a><span class="kw">points</span>(train, train<span class="op">*</span><span class="dv">0</span><span class="fl">+0.5</span>, <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb92-7"><a href="년-3월.html#cb92-7"></a><span class="kw">points</span>(test,  test<span class="op">*</span><span class="dv">0</span><span class="fl">+0.5</span>,  <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb92-8"><a href="년-3월.html#cb92-8"></a><span class="kw">text</span>(<span class="dv">26</span>,<span class="fl">0.5</span>,<span class="st">&quot;시간&quot;</span>)</span>
<span id="cb92-9"><a href="년-3월.html#cb92-9"></a><span class="kw">text</span>(<span class="dv">10</span>,<span class="fl">0.7</span>,<span class="st">&quot;훈련데이터&quot;</span>,<span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb92-10"><a href="년-3월.html#cb92-10"></a><span class="kw">text</span>(<span class="dv">21</span>,<span class="fl">0.7</span>,<span class="st">&quot;시험데이터&quot;</span>,<span class="dt">col=</span><span class="st">&quot;red&quot;</span>)}</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-39-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="년-3월.html#cb93-1"></a><span class="co"># Core Tidyverse</span></span>
<span id="cb93-2"><a href="년-3월.html#cb93-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb93-3"><a href="년-3월.html#cb93-3"></a><span class="kw">library</span>(glue)</span>
<span id="cb93-4"><a href="년-3월.html#cb93-4"></a><span class="kw">library</span>(forcats)</span>
<span id="cb93-5"><a href="년-3월.html#cb93-5"></a></span>
<span id="cb93-6"><a href="년-3월.html#cb93-6"></a><span class="co"># Time Series</span></span>
<span id="cb93-7"><a href="년-3월.html#cb93-7"></a><span class="kw">library</span>(timetk)</span>
<span id="cb93-8"><a href="년-3월.html#cb93-8"></a><span class="kw">library</span>(tidyquant)</span>
<span id="cb93-9"><a href="년-3월.html#cb93-9"></a><span class="kw">library</span>(tibbletime)</span>
<span id="cb93-10"><a href="년-3월.html#cb93-10"></a><span class="kw">library</span>(sweep)</span>
<span id="cb93-11"><a href="년-3월.html#cb93-11"></a></span>
<span id="cb93-12"><a href="년-3월.html#cb93-12"></a><span class="co"># Visualization</span></span>
<span id="cb93-13"><a href="년-3월.html#cb93-13"></a><span class="kw">library</span>(cowplot)</span>
<span id="cb93-14"><a href="년-3월.html#cb93-14"></a></span>
<span id="cb93-15"><a href="년-3월.html#cb93-15"></a><span class="co"># Preprocessing</span></span>
<span id="cb93-16"><a href="년-3월.html#cb93-16"></a><span class="kw">library</span>(recipes)</span>
<span id="cb93-17"><a href="년-3월.html#cb93-17"></a></span>
<span id="cb93-18"><a href="년-3월.html#cb93-18"></a><span class="co"># Sampling / Accuracy</span></span>
<span id="cb93-19"><a href="년-3월.html#cb93-19"></a><span class="kw">library</span>(rsample)</span>
<span id="cb93-20"><a href="년-3월.html#cb93-20"></a><span class="kw">library</span>(yardstick) </span>
<span id="cb93-21"><a href="년-3월.html#cb93-21"></a></span>
<span id="cb93-22"><a href="년-3월.html#cb93-22"></a><span class="co"># Modeling</span></span>
<span id="cb93-23"><a href="년-3월.html#cb93-23"></a><span class="kw">library</span>(forecast)</span>
<span id="cb93-24"><a href="년-3월.html#cb93-24"></a></span>
<span id="cb93-25"><a href="년-3월.html#cb93-25"></a><span class="kw">data</span>(<span class="st">&quot;AirPassengers&quot;</span>)</span>
<span id="cb93-26"><a href="년-3월.html#cb93-26"></a></span>
<span id="cb93-27"><a href="년-3월.html#cb93-27"></a>ap_ts &lt;-<span class="st"> </span>AirPassengers <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-28"><a href="년-3월.html#cb93-28"></a><span class="st">  </span><span class="kw">tk_tbl</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-29"><a href="년-3월.html#cb93-29"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">index =</span> <span class="kw">as_date</span>(index)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-30"><a href="년-3월.html#cb93-30"></a><span class="st">  </span><span class="kw">as_tbl_time</span>(<span class="dt">index =</span> index) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-31"><a href="년-3월.html#cb93-31"></a><span class="st">  </span><span class="kw">filter</span>(index <span class="op">&gt;=</span><span class="st"> &quot;1950-01-01&quot;</span>, index <span class="op">&lt;=</span><span class="st"> &quot;1959-12-31&quot;</span>)</span>
<span id="cb93-32"><a href="년-3월.html#cb93-32"></a></span>
<span id="cb93-33"><a href="년-3월.html#cb93-33"></a><span class="kw">ggplot</span>(ap_ts, <span class="kw">aes</span>(<span class="dt">x=</span>index, <span class="dt">y=</span>value)) <span class="op">+</span></span>
<span id="cb93-34"><a href="년-3월.html#cb93-34"></a><span class="st">  </span><span class="kw">geom_line</span>()</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-40-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>오늘은 여기까지…</p>
</div>
</div>
<div id="til20220312" class="section level2 hasAnchor">
<h2>TIL20220312<a href="년-3월.html#til20220312" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rstudio-chunk-options" class="section level3 hasAnchor">
<h3>RStudio Chunk options<a href="년-3월.html#rstudio-chunk-options" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R Code Chunks<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>Rmarkdown으로 문서 작성 시 꼭 필요한 사용하게 된다. 알아 둘 것.</p>
<pre><code>knitr::opts_chunk$set(# root.dir = &#39;../..&#39;, # 프로젝트 폴더 지정
                      eval = TRUE,
                      echo = FALSE,
                      cache = FALSE,
                      include = TRUE,
                      tidy = TRUE,
                      tidy.opts = list(blank=FALSE, width.cutoff=120), # 소스 출력길이 지정
                      message = FALSE,
                      warning = FALSE,
                      engine = &quot;R&quot;, # Chunks will always have R code, unless noted
                      error = TRUE,
                      fig.path=&quot;Figures/&quot;,  # Set the figure options
                      fig.align = &quot;center&quot;,
                      fig.width = 7,
                      fig.height = 7,
                      fig.keep=&#39;all&#39;, fig.retina=2)</code></pre>
</div>
</div>
<div id="til20220311" class="section level2 hasAnchor">
<h2>TIL20220311<a href="년-3월.html#til20220311" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>DWmR 패키지는 github actions로 설치 안되는 걸로…<br />
RStudio에서 rendering 후 업로드 하자.</p>
<div id="url을-통해-직접-패키지-설치" class="section level3 hasAnchor">
<h3>URL을 통해 직접 패키지 설치<a href="년-3월.html#url을-통해-직접-패키지-설치" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Install an R package directly from a URL for the package source<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="년-3월.html#cb95-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;https://cran.r-project.org/src/contrib/Archive/DMwR/DMwR_0.4.1.tar.gz&quot;</span>, <span class="dt">repos=</span><span class="ot">NULL</span>, <span class="dt">method=</span><span class="st">&quot;libcurl&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="년-3월.html#cb96-1"></a><span class="kw">data</span>(<span class="st">&quot;BreastCancer&quot;</span>)</span>
<span id="cb96-2"><a href="년-3월.html#cb96-2"></a>bc &lt;-<span class="st"> </span>BreastCancer[, <span class="dv">-1</span>] <span class="co"># Id 열 제외</span></span></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="년-3월.html#cb97-1"></a>bc.smote &lt;-<span class="st"> </span><span class="kw">SMOTE</span>(Class <span class="op">~</span><span class="st"> </span>., bc, <span class="dt">perc.over =</span> <span class="dv">100</span>, <span class="dt">perc.under =</span> <span class="dv">200</span>)</span>
<span id="cb97-2"><a href="년-3월.html#cb97-2"></a>bc.smote.compete &lt;-<span class="st"> </span><span class="kw">complete</span>(bc.smote)</span>
<span id="cb97-3"><a href="년-3월.html#cb97-3"></a><span class="kw">rbind</span>(<span class="dt">Orig =</span> <span class="kw">table</span>(bc<span class="op">$</span>Class), <span class="dt">SMOTE =</span> <span class="kw">table</span>(bc.smote.compete<span class="op">$</span>Class))</span></code></pre></div>
</div>
</div>
<div id="til20220310" class="section level2 hasAnchor">
<h2>TIL20220310<a href="년-3월.html#til20220310" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="년-3월.html#cb98-1"></a><span class="kw">data</span>(<span class="st">&quot;BreastCancer&quot;</span>)</span>
<span id="cb98-2"><a href="년-3월.html#cb98-2"></a>bc &lt;-<span class="st"> </span>BreastCancer[, <span class="dv">-1</span>] <span class="co"># Id 열 제외</span></span>
<span id="cb98-3"><a href="년-3월.html#cb98-3"></a><span class="kw">str</span>(bc)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    699 obs. of  10 variables:
##  $ Cl.thickness   : Ord.factor w/ 10 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 5 5 3 6 4 8 1 2 2 4 ...
##  $ Cell.size      : Ord.factor w/ 10 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 1 4 1 8 1 10 1 1 1 2 ...
##  $ Cell.shape     : Ord.factor w/ 10 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 1 4 1 8 1 10 1 2 1 1 ...
##  $ Marg.adhesion  : Ord.factor w/ 10 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 1 5 1 1 3 8 1 1 1 1 ...
##  $ Epith.c.size   : Ord.factor w/ 10 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 2 7 2 3 2 7 2 2 2 2 ...
##  $ Bare.nuclei    : Factor w/ 10 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 10 2 4 1 10 10 1 1 1 ...
##  $ Bl.cromatin    : Factor w/ 10 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 3 3 3 3 3 9 3 3 1 2 ...
##  $ Normal.nucleoli: Factor w/ 10 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 1 7 1 7 1 1 1 1 ...
##  $ Mitoses        : Factor w/ 9 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 1 1 1 1 1 1 1 5 1 ...
##  $ Class          : Factor w/ 2 levels &quot;benign&quot;,&quot;malignant&quot;: 1 1 1 1 1 2 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="년-3월.html#cb100-1"></a>train.index &lt;-<span class="st"> </span><span class="kw">createDataPartition</span>(bc<span class="op">$</span>Class, <span class="dt">p=</span><span class="fl">0.75</span>, <span class="dt">list=</span>F)</span>
<span id="cb100-2"><a href="년-3월.html#cb100-2"></a>bc.train &lt;-<span class="st"> </span>bc[train.index, ]; bc.test &lt;-<span class="st"> </span>bc[<span class="op">-</span>train.index, ];</span>
<span id="cb100-3"><a href="년-3월.html#cb100-3"></a><span class="kw">rbind</span>(<span class="dt">TrainData =</span> <span class="kw">table</span>(bc.train<span class="op">$</span>Class), <span class="dt">TestData =</span> <span class="kw">table</span>(bc.test<span class="op">$</span>Class))</span></code></pre></div>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="년-3월.html#cb101-1"></a><span class="co"># upsampling / downsample / SMOTE</span></span>
<span id="cb101-2"><a href="년-3월.html#cb101-2"></a>bc.train.up &lt;-<span class="st"> </span><span class="kw">upSample</span>(<span class="kw">subset</span>(bc.train, <span class="dt">select =</span> <span class="op">-</span>Class), bc.train<span class="op">$</span>Class)</span>
<span id="cb101-3"><a href="년-3월.html#cb101-3"></a>bc.train.down &lt;-<span class="st"> </span><span class="kw">downSample</span>(<span class="kw">subset</span>(bc.train, <span class="dt">select =</span> <span class="op">-</span>Class), bc.train<span class="op">$</span>Class)</span>
<span id="cb101-4"><a href="년-3월.html#cb101-4"></a>bc.train.smote &lt;-<span class="st"> </span><span class="kw">SMOTE</span>(Class <span class="op">~</span><span class="st"> </span>., bc.train, <span class="dt">prec.over =</span> <span class="dv">900</span>, <span class="dt">perc.under=</span><span class="dv">150</span>)</span>
<span id="cb101-5"><a href="년-3월.html#cb101-5"></a><span class="kw">rbind</span>(<span class="dt">Upsampling =</span> <span class="kw">table</span>(bc.train.up<span class="op">$</span>Class),</span>
<span id="cb101-6"><a href="년-3월.html#cb101-6"></a>      <span class="dt">Downsampling =</span> <span class="kw">table</span>(bc.train.down<span class="op">$</span>Class),</span>
<span id="cb101-7"><a href="년-3월.html#cb101-7"></a>      <span class="dt">SMOTE =</span> <span class="kw">table</span>(bc.train.smote<span class="op">$</span>Class))</span></code></pre></div>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="년-3월.html#cb102-1"></a>p.dt &lt;-<span class="st"> </span><span class="kw">rpart</span>(Class <span class="op">~</span><span class="st"> </span>., bc.train)</span>
<span id="cb102-2"><a href="년-3월.html#cb102-2"></a>p.dt.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(p.dt, bc.test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb102-3"><a href="년-3월.html#cb102-3"></a>orig.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(p.dt.pred, bc.test<span class="op">$</span>Class)<span class="op">$</span>overall[<span class="dv">1</span>]</span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="년-3월.html#cb103-1"></a>p.dt &lt;-<span class="st"> </span><span class="kw">rpart</span>(Class <span class="op">~</span><span class="st"> </span>., bc.train.up)</span>
<span id="cb103-2"><a href="년-3월.html#cb103-2"></a>p.dt.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(p.dt, bc.test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb103-3"><a href="년-3월.html#cb103-3"></a>up.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(p.dt.pred, bc.test<span class="op">$</span>Class)<span class="op">$</span>overall[<span class="dv">1</span>]</span></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="년-3월.html#cb104-1"></a>p.dt &lt;-<span class="st"> </span><span class="kw">rpart</span>(Class <span class="op">~</span><span class="st"> </span>., bc.train.down)</span>
<span id="cb104-2"><a href="년-3월.html#cb104-2"></a>p.dt.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(p.dt, bc.test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb104-3"><a href="년-3월.html#cb104-3"></a>down.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(p.dt.pred, bc.test<span class="op">$</span>Class)<span class="op">$</span>overall[<span class="dv">1</span>]</span></code></pre></div>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="년-3월.html#cb105-1"></a>p.dt &lt;-<span class="st"> </span><span class="kw">rpart</span>(Class <span class="op">~</span><span class="st"> </span>., bc.train.smote)</span>
<span id="cb105-2"><a href="년-3월.html#cb105-2"></a>p.dt.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(p.dt, bc.test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb105-3"><a href="년-3월.html#cb105-3"></a>smote.cm &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(p.dt.pred, bc.test<span class="op">$</span>Class)<span class="op">$</span>overall[<span class="dv">1</span>]</span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="년-3월.html#cb106-1"></a><span class="kw">rbind</span>(<span class="dt">Orig =</span> orig.cm,</span>
<span id="cb106-2"><a href="년-3월.html#cb106-2"></a>      <span class="dt">Upsampling =</span> up.cm,</span>
<span id="cb106-3"><a href="년-3월.html#cb106-3"></a>      <span class="dt">Downsampling =</span> down.cm,</span>
<span id="cb106-4"><a href="년-3월.html#cb106-4"></a>      <span class="dt">SMOTE =</span> smote.cm)</span></code></pre></div>
<p>상황에 따라 결과가 다르게 나오지만 대체적으로 SMOTE에서 높은 정확도를 보인다.</p>
<div id="smote-데이터-형식-오류" class="section level3 hasAnchor">
<h3>SMOTE 데이터 형식 오류<a href="년-3월.html#smote-데이터-형식-오류" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://stackoverflow.com/questions/62750638/why-do-i-get-error-in-t-col-data-col-when-i-use-smote-in-r">Why do I get ‘Error in T[, col] &lt;- data[, col]’ when I use SMOTE in R?</a></p>
<p>변수는 facter형이고, tibble 형식을 지원하지 않는다.</p>
</div>
</div>
<div id="til20220309" class="section level2 hasAnchor">
<h2>TIL20220309<a href="년-3월.html#til20220309" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="클래스-불균형과-샘플링" class="section level3 hasAnchor">
<h3>클래스 불균형과 샘플링<a href="년-3월.html#클래스-불균형과-샘플링" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>분류 분석의 경우 관찰된 표본 범주 비율이 큰 쪽으로 편향되는 경향이 있다. 이를 해결하기 위해 범주의 비율을 조절하여 정제한다.</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/rafjaa/machine_learning_fecib/master/src/static/img/resampling.png" alt="" />
<p class="caption">Downsampling &amp; Upsampling<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/rafjaa/machine_learning_fecib/master/src/static/img/smote.png" alt="" />
<p class="caption">SMOTE<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
</div>
<ul>
<li>Upsampling: this method increases the size of the minority class by sampling with replacement so that the classes will have the same size.</li>
<li>Downsampling: in contrast to the above method, this one decreases the size of the majority class to be the same or closer to the minority class size by just taking out a random sample.<br />
</li>
<li>Hybrid methods : The well known hybrid methods are ROSE (Random oversampling examples), and SMOTE (Synthetic minority oversampling technique), they downsample the majority class, and creat new artificial points in the minority class. For more detail about SMOTE method click here, and for ROSE click here.</li>
</ul>
<p>from: Methods for dealing with imbalanced data<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
</div>
</div>
<div id="til20220308" class="section level2 hasAnchor">
<h2>TIL20220308<a href="년-3월.html#til20220308" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="r-에러-수정" class="section level3 hasAnchor">
<h3>R 에러 수정<a href="년-3월.html#r-에러-수정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>&gt; library(dplyr)

Error: package or namespace load failed for ‘dplyr’ in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):

 ‘rlang’이라고 불리는 패키지가 없습니다

In addition: Warning message:

패키지 ‘dplyr’는 R 버전 3.4.4에서 작성되었습니다 </code></pre>
<p>이런 식으로 에러가 발생하면 깔끔하게 R을 재설치 하자. libpath나 패키지 재설치 등의 방법이 언급되지만 안되는 경우가 있다. 한시간 반 소비하고 내린 결론이다.</p>
<p>4.0.3에서 문제가 일어났고 4.1.2로 버전 업해서 문제 해결되었다.</p>
<pre><code>Error:
! Assigned data `all_column_mean[i]` must be compatible with existing data.
i Error occurred for column `flipper_length_mm`.
x Can&#39;t convert from &lt;double&gt; to &lt;integer&gt; due to loss of precision.
* Locations: 1.
Backtrace:
  1. base::`[&lt;-`(`*tmp*`, is.na(p.mean[, i]), i, value = `&lt;dbl&gt;`)
 19. tibble `&lt;fn&gt;`(`&lt;vctrs___&gt;`)</code></pre>
<p><code>p.mean &lt;- as.data.frame(penguins[c(3:6)])</code>와 같이 데이터 형태를 명시적으로 지정해 준다.</p>
</div>
<div id="결측치-시각화" class="section level3 hasAnchor">
<h3>결측치 시각화<a href="년-3월.html#결측치-시각화" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="년-3월.html#cb109-1"></a><span class="kw">md.pattern</span>(penguins, <span class="dt">plot=</span>T, <span class="dt">rotate.names =</span> T)</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-53-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre><code>##     species island year bill_length_mm bill_depth_mm flipper_length_mm
## 333       1      1    1              1             1                 1
## 9         1      1    1              1             1                 1
## 2         1      1    1              0             0                 0
##           0      0    0              2             2                 2
##     body_mass_g sex   
## 333           1   1  0
## 9             1   0  1
## 2             0   0  5
##               2  11 19</code></pre>
</div>
</div>
<div id="til20220307" class="section level2 hasAnchor">
<h2>TIL20220307<a href="년-3월.html#til20220307" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="결측치-처리" class="section level3 hasAnchor">
<h3>결측치 처리<a href="년-3월.html#결측치-처리" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="결측치-종류" class="section level4 hasAnchor">
<h4>결측치 종류<a href="년-3월.html#결측치-종류" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="figure">
<img src="https://miro.medium.com/max/1400/1*cPNnAnoOYArYyTDPNjJg3A.gif" alt="" />
<p class="caption">결측치 종류</p>
</div>
</div>
<div id="확인" class="section level4 hasAnchor">
<h4>확인<a href="년-3월.html#확인" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="년-3월.html#cb111-1"></a><span class="co">## summary()</span></span>
<span id="cb111-2"><a href="년-3월.html#cb111-2"></a><span class="kw">summary</span>(penguins)</span></code></pre></div>
<pre><code>##       species          island    bill_length_mm  bill_depth_mm  
##  Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
##  Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
##  Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
##                                  Mean   :43.92   Mean   :17.15  
##                                  3rd Qu.:48.50   3rd Qu.:18.70  
##                                  Max.   :59.60   Max.   :21.50  
##                                  NA&#39;s   :2       NA&#39;s   :2      
##  flipper_length_mm  body_mass_g       sex           year     
##  Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
##  1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
##  Median :197.0     Median :4050   NA&#39;s  : 11   Median :2008  
##  Mean   :200.9     Mean   :4202                Mean   :2008  
##  3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
##  Max.   :231.0     Max.   :6300                Max.   :2009  
##  NA&#39;s   :2         NA&#39;s   :2</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="년-3월.html#cb113-1"></a><span class="kw">colSums</span>(<span class="kw">is.na</span>(penguins)); <span class="kw">nrow</span>(penguins)</span></code></pre></div>
<pre><code>##           species            island    bill_length_mm     bill_depth_mm 
##                 0                 0                 2                 2 
## flipper_length_mm       body_mass_g               sex              year 
##                 2                 2                11                 0</code></pre>
<pre><code>## [1] 344</code></pre>
<p>등등등</p>
</div>
<div id="제거" class="section level4 hasAnchor">
<h4>제거<a href="년-3월.html#제거" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="년-3월.html#cb116-1"></a>penguins.naomit &lt;-<span class="st"> </span><span class="kw">na.omit</span>(penguins)</span>
<span id="cb116-2"><a href="년-3월.html#cb116-2"></a><span class="kw">colSums</span>(<span class="kw">is.na</span>(penguins.naomit)); <span class="kw">nrow</span>(penguins.naomit)</span></code></pre></div>
<pre><code>##           species            island    bill_length_mm     bill_depth_mm 
##                 0                 0                 0                 0 
## flipper_length_mm       body_mass_g               sex              year 
##                 0                 0                 0                 0</code></pre>
<pre><code>## [1] 333</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="년-3월.html#cb119-1"></a>penguins.naomit &lt;-<span class="st"> </span>penguins[<span class="kw">complete.cases</span>(penguins), ]</span>
<span id="cb119-2"><a href="년-3월.html#cb119-2"></a><span class="kw">colSums</span>(<span class="kw">is.na</span>(penguins.naomit)); <span class="kw">nrow</span>(penguins.naomit)</span></code></pre></div>
<pre><code>##           species            island    bill_length_mm     bill_depth_mm 
##                 0                 0                 0                 0 
## flipper_length_mm       body_mass_g               sex              year 
##                 0                 0                 0                 0</code></pre>
<pre><code>## [1] 333</code></pre>
<p>제거 후 11개 행이 감소된 것을 볼 수 있다.</p>
</div>
<div id="대체" class="section level4 hasAnchor">
<h4>대체<a href="년-3월.html#대체" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="으로-대체" class="section level4 hasAnchor">
<h4>0으로 대체<a href="년-3월.html#으로-대체" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="년-3월.html#cb122-1"></a><span class="co"># 연속형 변수에 대해서만 적용</span></span>
<span id="cb122-2"><a href="년-3월.html#cb122-2"></a>penguins<span class="fl">.0</span> &lt;-<span class="st"> </span>penguins[<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)] <span class="op">%&gt;%</span></span>
<span id="cb122-3"><a href="년-3월.html#cb122-3"></a><span class="st">  </span><span class="kw">select_if</span>(<span class="cf">function</span>(x) <span class="kw">any</span>(<span class="kw">is.na</span>(x))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb122-4"><a href="년-3월.html#cb122-4"></a><span class="st">  </span><span class="kw">replace</span>(<span class="kw">is.na</span>(.), <span class="dv">0</span>)</span>
<span id="cb122-5"><a href="년-3월.html#cb122-5"></a><span class="kw">colSums</span>(<span class="kw">is.na</span>(penguins<span class="fl">.0</span>))</span></code></pre></div>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##                 0                 0                 0                 0</code></pre>
</div>
<div id="평균으로-대체" class="section level4 hasAnchor">
<h4>평균으로 대체<a href="년-3월.html#평균으로-대체" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="년-3월.html#cb124-1"></a>penguins.mean &lt;-<span class="st"> </span>penguins[<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb124-2"><a href="년-3월.html#cb124-2"></a><span class="st">  </span><span class="kw">select_if</span>(<span class="cf">function</span>(x) <span class="kw">any</span>(<span class="kw">is.na</span>(x))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb124-3"><a href="년-3월.html#cb124-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">bill_length_mm =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(bill_length_mm), <span class="kw">mean</span>(bill_length_mm, <span class="dt">na.rm=</span>T), bill_length_mm),</span>
<span id="cb124-4"><a href="년-3월.html#cb124-4"></a>         <span class="dt">bill_depth_mm =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(bill_depth_mm), <span class="kw">mean</span>(bill_depth_mm, <span class="dt">na.rm=</span>T), bill_depth_mm),</span>
<span id="cb124-5"><a href="년-3월.html#cb124-5"></a>         <span class="dt">flipper_length_mm =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(flipper_length_mm), <span class="kw">mean</span>(flipper_length_mm, <span class="dt">na.rm=</span>T), flipper_length_mm),</span>
<span id="cb124-6"><a href="년-3월.html#cb124-6"></a>         <span class="dt">body_mass_g =</span> <span class="kw">ifelse</span>(<span class="kw">is.na</span>(body_mass_g), <span class="kw">mean</span>(body_mass_g, <span class="dt">na.rm=</span>T), body_mass_g))</span>
<span id="cb124-7"><a href="년-3월.html#cb124-7"></a><span class="kw">colSums</span>(<span class="kw">is.na</span>(penguins.mean))</span></code></pre></div>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##                 0                 0                 0                 0</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="년-3월.html#cb126-1"></a><span class="co"># 0으로 대체한 경우와 평균값으로 대체한 경우의 차이</span></span>
<span id="cb126-2"><a href="년-3월.html#cb126-2"></a><span class="kw">colMeans</span>(penguins[<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)], <span class="dt">na.rm =</span> T); <span class="kw">colMeans</span>(penguins<span class="fl">.0</span>); <span class="kw">colMeans</span>(<span class="kw">round</span>(penguins.mean,<span class="dv">1</span>));</span></code></pre></div>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##          43.92193          17.15117         200.91520        4201.75439</code></pre>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##          43.66657          17.05145         199.74709        4177.32558</code></pre>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##          43.92180          17.15145         200.91512        4201.75465</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="년-3월.html#cb130-1"></a>all_column_median &lt;-<span class="st"> </span><span class="kw">apply</span>(penguins[<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)], <span class="dv">2</span>, median, <span class="dt">na.rm=</span>T); all_column_median</span></code></pre></div>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##             44.45             17.30            197.00           4050.00</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="년-3월.html#cb132-1"></a>penguins.median &lt;-<span class="st"> </span>penguins[<span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">6</span>)]</span>
<span id="cb132-2"><a href="년-3월.html#cb132-2"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">colnames</span>(penguins.median)) { </span>
<span id="cb132-3"><a href="년-3월.html#cb132-3"></a>  penguins.median[<span class="kw">is.na</span>(penguins.median[,i]), i] &lt;-<span class="st"> </span>all_column_median[i]</span>
<span id="cb132-4"><a href="년-3월.html#cb132-4"></a>}</span>
<span id="cb132-5"><a href="년-3월.html#cb132-5"></a><span class="kw">colMeans</span>(<span class="kw">round</span>(penguins.median))</span></code></pre></div>
<pre><code>##    bill_length_mm     bill_depth_mm flipper_length_mm       body_mass_g 
##          43.93314          17.15407         200.89244        4200.87209</code></pre>
</div>
</div>
</div>
<div id="til20220306" class="section level2 hasAnchor">
<h2>TIL20220306<a href="년-3월.html#til20220306" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="대응표본-평균검정" class="section level3 hasAnchor">
<h3>대응표본 평균검정<a href="년-3월.html#대응표본-평균검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>독립표본 평균검정은 두 개의 표본이 서로 독립인 모집단으로부터추출되었다는 가정을 전제로 한다. 두 표본의 값이 쌍(pair)을 이루고 있는 경우 쌍을 이룬 값은 서로 독립이 아니며, 이처럼 검정하려고 하는 두 개의 표본이 서로 독립이 아닌 모집단으로부터 추출되었을 대 <code>대응표본 평균검정</code>(paired-samples t test)을 이용하여 두 집단 간의차이 검정을 수행할 수 있다.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>독립표본</th>
<th>대응표본</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>무작위로 실험 대상자를선정하여 두 개의 집단으로 나눔</td>
<td>무작위로 실험 대상자를 선정</td>
</tr>
<tr class="even">
<td>한 집단에는 앛미식사를 하고 IQ 테스트에 응하도록 하고 다른 집단에는 앛미식사를 거르고 IQ 테스트에참가하도록 함</td>
<td>각 실험 대아자를 대상으로 IQ 테스트를 두 차례 실시</td>
</tr>
<tr class="odd">
<td>각 실험 대상자에 대해 하나씩의 IQ 테스트 점수를 얻게 됨</td>
<td>한번은 아침칫가를 하고 테스트에 응하고 다른 한번은 아침식사를 하지 않은 상태로 테스트에 참가하도록 함</td>
</tr>
<tr class="even">
<td></td>
<td>각 식험 대상자에 대해 두 개의 IQ 테스트 점수를 얻게 됨</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="년-3월.html#cb134-1"></a><span class="kw">str</span>(sleep)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    20 obs. of  3 variables:
##  $ extra: num  0.7 -1.6 -0.2 -1.2 -0.1 3.4 3.7 0.8 0 2 ...
##  $ group: Factor w/ 2 levels &quot;1&quot;,&quot;2&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ ID   : Factor w/ 10 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="년-3월.html#cb136-1"></a><span class="kw">t.test</span>(extra <span class="op">~</span><span class="st"> </span>group, <span class="dt">data =</span> sleep, <span class="dt">paired =</span> T)</span></code></pre></div>
<pre><code>## 
##  Paired t-test
## 
## data:  extra by group
## t = -4.0621, df = 9, p-value = 0.002833
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -2.4598858 -0.7001142
## sample estimates:
## mean of the differences 
##                   -1.58</code></pre>
<p>주어진 표본이 wide format일 경우 벡터를 직접 지정하여 수행한다.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="년-3월.html#cb138-1"></a>sleep.wide &lt;-<span class="st"> </span><span class="kw">spread</span>(sleep, <span class="dt">key =</span> group, <span class="dt">value =</span> extra)</span>
<span id="cb138-2"><a href="년-3월.html#cb138-2"></a>sleep.wide</span></code></pre></div>
<pre><code>##    ID    1    2
## 1   1  0.7  1.9
## 2   2 -1.6  0.8
## 3   3 -0.2  1.1
## 4   4 -1.2  0.1
## 5   5 -0.1 -0.1
## 6   6  3.4  4.4
## 7   7  3.7  5.5
## 8   8  0.8  1.6
## 9   9  0.0  4.6
## 10 10  2.0  3.4</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="년-3월.html#cb140-1"></a><span class="kw">t.test</span>(sleep.wide<span class="op">$</span><span class="st">`</span><span class="dt">1</span><span class="st">`</span>, sleep.wide<span class="op">$</span><span class="st">`</span><span class="dt">2</span><span class="st">`</span>, <span class="dt">paired =</span> T)</span></code></pre></div>
<pre><code>## 
##  Paired t-test
## 
## data:  sleep.wide$`1` and sleep.wide$`2`
## t = -4.0621, df = 9, p-value = 0.002833
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -2.4598858 -0.7001142
## sample estimates:
## mean of the differences 
##                   -1.58</code></pre>
</div>
<div id="독립표본-비율검정" class="section level3 hasAnchor">
<h3>독립표본 비율검정<a href="년-3월.html#독립표본-비율검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>귀무가설: 폐질환자 대비 흡연자의 비율이 병원별로 같다.</li>
<li>대립가설: 폐질환자 대비 흡연자의 비율이 병원별로 다르다.</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="년-3월.html#cb142-1"></a><span class="co"># 4개 병원에 대한 폐질환자 및 흡연자 비율</span></span>
<span id="cb142-2"><a href="년-3월.html#cb142-2"></a>patients &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">86</span>, <span class="dv">93</span>, <span class="dv">136</span>, <span class="dv">82</span>) <span class="co"># 폐질환자</span></span>
<span id="cb142-3"><a href="년-3월.html#cb142-3"></a>smokers &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">83</span>, <span class="dv">90</span>, <span class="dv">129</span>,<span class="dv">70</span>)   <span class="co"># 흡연자</span></span>
<span id="cb142-4"><a href="년-3월.html#cb142-4"></a>smokers<span class="op">/</span>patients <span class="co"># 페질환자 대비 흡연자 비율</span></span></code></pre></div>
<pre><code>## [1] 0.9651163 0.9677419 0.9485294 0.8536585</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="년-3월.html#cb144-1"></a><span class="kw">prop.test</span>(<span class="dt">x=</span>smokers, <span class="dt">n=</span>patients)</span></code></pre></div>
<pre><code>## 
##  4-sample test for equality of proportions without continuity
##  correction
## 
## data:  smokers out of patients
## X-squared = 12.6, df = 3, p-value = 0.005585
## alternative hypothesis: two.sided
## sample estimates:
##    prop 1    prop 2    prop 3    prop 4 
## 0.9651163 0.9677419 0.9485294 0.8536585</code></pre>
<p>검정 수행 결과 네 병원의 폐질환자 대비 흡연자 수는 값다고 볼 수 없다.</p>
</div>
<div id="독립표본-평균검정" class="section level3 hasAnchor">
<h3>독립표본 평균검정<a href="년-3월.html#독립표본-평균검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>독립표본 평균검정</code>(two-independent samples t test)는 두 개의 독립표본 데이터를 이용하여 각각 대응되는 두 개의 모집단 평균이 서로 동일한지 검정한다. 두 집단이 서로 차이가 있는지를 검정하고자 할 때 수행한다.</p>
<ul>
<li>귀무가설: 두 집단의 평균에는 차이가 없다(같다).</li>
<li>대립가설: 두 집단의 평균에는 차이가 있다(다르다).</li>
</ul>
<p><strong>예제</strong></p>
<p>고양이의 성별에 따른 몸무게의 차이가 있는지를 검정한다.</p>
<ul>
<li>귀무가설: 고양이 성별에 따른 몸무게 차이는 없다.</li>
<li>대립가설: 고양이 성별에 따른 몸무게 차이는 있다.</li>
</ul>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="년-3월.html#cb146-1"></a><span class="kw">t.test</span>(<span class="dt">formula =</span> Bwt <span class="op">~</span><span class="st"> </span>Sex, <span class="dt">data =</span> cats)</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  Bwt by Sex
## t = -8.7095, df = 136.84, p-value = 8.831e-15
## alternative hypothesis: true difference in means between group F and group M is not equal to 0
## 95 percent confidence interval:
##  -0.6631268 -0.4177242
## sample estimates:
## mean in group F mean in group M 
##        2.359574        2.900000</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="년-3월.html#cb148-1"></a>Bwt.f &lt;-<span class="st"> </span>cats<span class="op">$</span>Bwt[cats<span class="op">$</span>Sex<span class="op">==</span><span class="st">&quot;F&quot;</span>]</span>
<span id="cb148-2"><a href="년-3월.html#cb148-2"></a>Bwt.m &lt;-<span class="st"> </span>cats<span class="op">$</span>Bwt[cats<span class="op">$</span>Sex<span class="op">==</span><span class="st">&quot;M&quot;</span>]</span>
<span id="cb148-3"><a href="년-3월.html#cb148-3"></a><span class="kw">mean</span>(Bwt.f); <span class="kw">mean</span>(Bwt.m);</span></code></pre></div>
<pre><code>## [1] 2.359574</code></pre>
<pre><code>## [1] 2.9</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="년-3월.html#cb151-1"></a><span class="kw">t.test</span>(Bwt.f, Bwt.m)</span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  Bwt.f and Bwt.m
## t = -8.7095, df = 136.84, p-value = 8.831e-15
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.6631268 -0.4177242
## sample estimates:
## mean of x mean of y 
##  2.359574  2.900000</code></pre>
</div>
<div id="일표본-비율검정" class="section level3 hasAnchor">
<h3>일표본 비율검정<a href="년-3월.html#일표본-비율검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>prop.test()</code> 함수는 모집단에 대한 표본의 비율에 대한 검정을 수행한다.</p>
<p><strong>예제</strong></p>
<p>프로야구 팀이 30경기 중 18승을 거두었을 때, 승률이 50%가 넘는다고 말할 수 있는가?</p>
<ul>
<li>귀무가설: 승률이 50% 이하다.</li>
<li>대립가설: 승률이 50% 이상이다.</li>
</ul>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="년-3월.html#cb153-1"></a><span class="co"># prop.test(x=성공횟수, n=시행횟수, p=검정코자하는비율)</span></span>
<span id="cb153-2"><a href="년-3월.html#cb153-2"></a><span class="kw">prop.test</span>(<span class="dt">x=</span><span class="dv">18</span>, <span class="dt">n=</span><span class="dv">30</span>, <span class="dt">p=</span><span class="fl">0.5</span>, <span class="dt">alternative =</span> <span class="st">&quot;greater&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  1-sample proportions test with continuity correction
## 
## data:  18 out of 30, null probability 0.5
## X-squared = 0.83333, df = 1, p-value = 0.1807
## alternative hypothesis: true p is greater than 0.5
## 95 percent confidence interval:
##  0.4344744 1.0000000
## sample estimates:
##   p 
## 0.6</code></pre>
</div>
<div id="일표본-평균검정" class="section level3 hasAnchor">
<h3>일표본 평균검정<a href="년-3월.html#일표본-평균검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>일표본 평균검정(one-sample t test)는 하나의 표본 데이터를 이용하여 모집단의 평균이 특정 값과 같은지 검정하는 것이다. 표본집단이 특정 모집단과 일치하는지 혹은 그렇지 않은지를 알고 싶을 때 이용한다.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="년-3월.html#cb155-1"></a><span class="kw">str</span>(cats)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    144 obs. of  3 variables:
##  $ Sex: Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Bwt: num  2 2 2 2.1 2.1 2.1 2.1 2.1 2.1 2.1 ...
##  $ Hwt: num  7 7.4 9.5 7.2 7.3 7.6 8.1 8.2 8.3 8.5 ...</code></pre>
<ul>
<li>귀무가설: 고양이의 몸무게가 2.6kg이다.</li>
<li>대립가설: 고양이의 몸무게가 2.6kg이 아니다.</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="년-3월.html#cb157-1"></a>t.result &lt;-<span class="st"> </span><span class="kw">t.test</span>(<span class="dt">x=</span>cats<span class="op">$</span>Bwt, <span class="dt">mu=</span><span class="fl">2.6</span>); t.result</span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  cats$Bwt
## t = 3.0565, df = 143, p-value = 0.002673
## alternative hypothesis: true mean is not equal to 2.6
## 95 percent confidence interval:
##  2.643669 2.803553
## sample estimates:
## mean of x 
##  2.723611</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="년-3월.html#cb159-1"></a>p95 &lt;-<span class="st"> </span><span class="kw">qt</span>(<span class="fl">0.975</span>, <span class="dt">df=</span><span class="dv">143</span>)</span>
<span id="cb159-2"><a href="년-3월.html#cb159-2"></a></span>
<span id="cb159-3"><a href="년-3월.html#cb159-3"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">4</span>,<span class="dv">4</span>)), <span class="kw">aes</span>(x)) <span class="op">+</span></span>
<span id="cb159-4"><a href="년-3월.html#cb159-4"></a><span class="st">  </span><span class="kw">stat_function</span>(<span class="dt">fun=</span>dt, <span class="dt">args =</span> <span class="kw">list</span>(<span class="dt">df=</span><span class="dv">143</span>)) <span class="op">+</span></span>
<span id="cb159-5"><a href="년-3월.html#cb159-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;t Distribution&quot;</span>, <span class="dt">x=</span><span class="st">&quot;x&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb159-6"><a href="년-3월.html#cb159-6"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb159-7"><a href="년-3월.html#cb159-7"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span>t.result<span class="op">$</span>statistic, <span class="dt">color=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb159-8"><a href="년-3월.html#cb159-8"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">x=</span>t.result<span class="op">$</span>statistic<span class="fl">+0.4</span>, <span class="dt">y=</span><span class="fl">0.02</span>, <span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">round</span>(t.result<span class="op">$</span>statistic,<span class="dv">2</span>)), <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="cb159-9"><a href="년-3월.html#cb159-9"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span>p95, <span class="dt">color=</span><span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb159-10"><a href="년-3월.html#cb159-10"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">x=</span>p95<span class="fl">+0.3</span>, <span class="dt">y=</span><span class="fl">0.06</span>, <span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">round</span>(p95,<span class="dv">2</span>)), <span class="dt">col=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span></span>
<span id="cb159-11"><a href="년-3월.html#cb159-11"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-74-1.png" width="672" style="display: block; margin: auto;" /></p>
<ul>
<li>귀무가설: 고양이의 몸무게가 2.7kg이다.</li>
<li>대립가설: 고양이의 몸무게가 2.7kg이 아니다.</li>
</ul>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="년-3월.html#cb160-1"></a>t.result &lt;-<span class="st"> </span><span class="kw">t.test</span>(<span class="dt">x=</span>cats<span class="op">$</span>Bwt, <span class="dt">mu=</span><span class="fl">2.7</span>); t.result</span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  cats$Bwt
## t = 0.58382, df = 143, p-value = 0.5603
## alternative hypothesis: true mean is not equal to 2.7
## 95 percent confidence interval:
##  2.643669 2.803553
## sample estimates:
## mean of x 
##  2.723611</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="년-3월.html#cb162-1"></a>p95 &lt;-<span class="st"> </span><span class="kw">qt</span>(<span class="fl">0.975</span>, <span class="dt">df=</span><span class="dv">143</span>)</span>
<span id="cb162-2"><a href="년-3월.html#cb162-2"></a></span>
<span id="cb162-3"><a href="년-3월.html#cb162-3"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">4</span>,<span class="dv">4</span>)), <span class="kw">aes</span>(x)) <span class="op">+</span></span>
<span id="cb162-4"><a href="년-3월.html#cb162-4"></a><span class="st">  </span><span class="kw">stat_function</span>(<span class="dt">fun=</span>dt, <span class="dt">args =</span> <span class="kw">list</span>(<span class="dt">df=</span><span class="dv">143</span>)) <span class="op">+</span></span>
<span id="cb162-5"><a href="년-3월.html#cb162-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;t Distribution&quot;</span>, <span class="dt">x=</span><span class="st">&quot;x&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb162-6"><a href="년-3월.html#cb162-6"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb162-7"><a href="년-3월.html#cb162-7"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span>t.result<span class="op">$</span>statistic, <span class="dt">color=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb162-8"><a href="년-3월.html#cb162-8"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">x=</span>t.result<span class="op">$</span>statistic<span class="fl">+0.4</span>, <span class="dt">y=</span><span class="fl">0.02</span>, <span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">round</span>(t.result<span class="op">$</span>statistic,<span class="dv">2</span>)), <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="cb162-9"><a href="년-3월.html#cb162-9"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span>p95, <span class="dt">color=</span><span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb162-10"><a href="년-3월.html#cb162-10"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">x=</span>p95<span class="fl">+0.3</span>, <span class="dt">y=</span><span class="fl">0.06</span>, <span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">round</span>(p95,<span class="dv">2</span>)), <span class="dt">col=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span></span>
<span id="cb162-11"><a href="년-3월.html#cb162-11"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-76-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="평균검정" class="section level3 hasAnchor">
<h3>평균검정<a href="년-3월.html#평균검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>평균검정</code>은 평균에 대한 가설검정을 의미한다. 선정한 표본이 특정 평균값을 갖는 모집단에 속하는지(즉 표본의 평균과 모집단의 평균이 동일한지) 또는 두 표본 집단의 평균값 간에 차이가 존재하는지(즉 두 표본집단이 동일한 모집단에 속하는지) 검정한다. 일표본 평균검정, 독립표본 평균검정, 대응표본 평균 검정이 있다.</p>
<p>평균에 대한 가설검정은 t검정(t test)을 통해 수행할 수 있다. 표본평균이 모집단 평균과 동일한지 여부는 t값을 검정 통계량으로 사용하여 검정한다.</p>
<p><span class="math display">\[
t = \frac{\bar{x}-\mu}{\frac{s}{\sqrt{n}}}
\]</span></p>
<p><strong>예제</strong></p>
<ul>
<li>귀무가설: 벤처기업 경영자의 혈압은 일반일과 같다</li>
<li>대립가설; 벤터기업 경영자의 혈압은 일반일과 다르다</li>
<li>표본: 20명의 벤처기업 경영자 평균 135, 표준편차 25</li>
<li>모집단: 일반인 혈압 평균 115</li>
</ul>
<p><span class="math display">\[
검정통계량 \ \ t = \frac{135-115}{\frac{25}{\sqrt{20}}} = 3.58
\]</span></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="년-3월.html#cb163-1"></a>t &lt;-<span class="st"> </span><span class="fl">3.58</span>; n &lt;-<span class="st"> </span><span class="dv">20</span>;</span>
<span id="cb163-2"><a href="년-3월.html#cb163-2"></a><span class="kw">pt</span>(t, <span class="dt">df=</span>n<span class="dv">-1</span>) <span class="co"># t값에 해당하는 누적확률 계산</span></span></code></pre></div>
<pre><code>## [1] 0.9990014</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="년-3월.html#cb165-1"></a><span class="co"># 특정 t값 이상의 누적확률에 관심이 있으므로 lower.tail을 F로 설정</span></span>
<span id="cb165-2"><a href="년-3월.html#cb165-2"></a><span class="co"># 반대편도 고려해야 함으로 두배 함</span></span>
<span id="cb165-3"><a href="년-3월.html#cb165-3"></a><span class="kw">pt</span>(t, <span class="dt">df=</span>n<span class="dv">-1</span>, <span class="dt">lower.tail =</span> F)<span class="op">*</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 0.001997274</code></pre>
<p>모집단 평균 115라는 가정하에서 135라는 평균은 0.002의 유의확률을 가지므로 5% 유의수준 하에서 귀무가설을 기각하고 대립가설을 채택한다.</p>
<p>유사한 방식으로 유의수준 0.05에 해당하는 t값을 계산하고 관측된 t값을 비교하여 검정한다.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="년-3월.html#cb167-1"></a>p95 &lt;-<span class="st"> </span><span class="kw">qt</span>(<span class="fl">0.025</span>, <span class="dt">df=</span>n<span class="dv">-1</span>, <span class="dt">lower.tail =</span> F); p95</span></code></pre></div>
<pre><code>## [1] 2.093024</code></pre>
<p>주어진 t 값은 유의수준 5%에 해당하는 t값의 오른쪽에 위치함으로 귀무가설을 기각하고 대립가설을 채택한다.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="년-3월.html#cb169-1"></a>dt_range &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb169-2"><a href="년-3월.html#cb169-2"></a>  y &lt;-<span class="st"> </span><span class="kw">dt</span>(x, <span class="dt">df=</span><span class="dv">19</span>)</span>
<span id="cb169-3"><a href="년-3월.html#cb169-3"></a>  y[x <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.09</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb169-4"><a href="년-3월.html#cb169-4"></a>  <span class="kw">return</span>(y)</span>
<span id="cb169-5"><a href="년-3월.html#cb169-5"></a>}</span>
<span id="cb169-6"><a href="년-3월.html#cb169-6"></a></span>
<span id="cb169-7"><a href="년-3월.html#cb169-7"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="op">-</span><span class="dv">4</span>,<span class="dv">4</span>)), <span class="kw">aes</span>(x)) <span class="op">+</span></span>
<span id="cb169-8"><a href="년-3월.html#cb169-8"></a><span class="st">  </span><span class="kw">stat_function</span>(<span class="dt">fun=</span>dt, <span class="dt">args =</span> <span class="kw">list</span>(<span class="dt">df=</span><span class="dv">19</span>)) <span class="op">+</span></span>
<span id="cb169-9"><a href="년-3월.html#cb169-9"></a><span class="st">  </span><span class="kw">stat_function</span>(<span class="dt">fun=</span>dt_range, <span class="dt">geom=</span><span class="st">&quot;area&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;salmon&quot;</span>, <span class="dt">alpha=</span>.<span class="dv">5</span>) <span class="op">+</span></span>
<span id="cb169-10"><a href="년-3월.html#cb169-10"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;t Distribution&quot;</span>, <span class="dt">x=</span><span class="st">&quot;x&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb169-11"><a href="년-3월.html#cb169-11"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb169-12"><a href="년-3월.html#cb169-12"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span>t, <span class="dt">color=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb169-13"><a href="년-3월.html#cb169-13"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">x=</span>t<span class="fl">+0.3</span>, <span class="dt">y=</span><span class="fl">0.02</span>, <span class="kw">aes</span>(<span class="dt">label=</span>t), <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="cb169-14"><a href="년-3월.html#cb169-14"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span>p95, <span class="dt">color=</span><span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="dt">size=</span><span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb169-15"><a href="년-3월.html#cb169-15"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">x=</span>p95<span class="fl">+0.3</span>, <span class="dt">y=</span><span class="fl">0.06</span>, <span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">round</span>(p95,<span class="dv">2</span>)), <span class="dt">col=</span><span class="st">&quot;red&quot;</span>) <span class="op">+</span></span>
<span id="cb169-16"><a href="년-3월.html#cb169-16"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-79-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="til20220305" class="section level2 hasAnchor">
<h2>TIL20220305<a href="년-3월.html#til20220305" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="정규분포" class="section level3 hasAnchor">
<h3>정규분포<a href="년-3월.html#정규분포" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>정규분포(normal distribution)는 대표적인 연속확률분포(continuous probability distribution)으로 통계적 검정을 위해 가장 널리 사용되는 분포이다. 정규분포에서는 대부분의 관측값이 중앙에 몰려 있으며 중앙에서 멀어질수록 그 빈도수가 점점 작아지는 종 모양의 대칭인 모습을 가진다.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="년-3월.html#cb170-1"></a>x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">4</span>, <span class="dv">4</span>, <span class="dt">length=</span><span class="dv">100</span>)</span>
<span id="cb170-2"><a href="년-3월.html#cb170-2"></a>y &lt;-<span class="st"> </span><span class="kw">dnorm</span>(x)</span>
<span id="cb170-3"><a href="년-3월.html#cb170-3"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span>x, <span class="dt">y=</span>y)</span>
<span id="cb170-4"><a href="년-3월.html#cb170-4"></a><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(x,y)) <span class="op">+</span></span>
<span id="cb170-5"><a href="년-3월.html#cb170-5"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-80-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="년-3월.html#cb171-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">65</span>,<span class="dv">135</span>)), <span class="kw">aes</span>(x)) <span class="op">+</span></span>
<span id="cb171-2"><a href="년-3월.html#cb171-2"></a><span class="st">  </span><span class="kw">stat_function</span>(<span class="dt">fun=</span>dnorm, <span class="dt">n=</span><span class="dv">101</span>, <span class="dt">args=</span><span class="kw">list</span>(<span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)) <span class="op">+</span></span>
<span id="cb171-3"><a href="년-3월.html#cb171-3"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Normal Distribution&quot;</span>, <span class="dt">x=</span><span class="st">&quot;x&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb171-4"><a href="년-3월.html#cb171-4"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb171-5"><a href="년-3월.html#cb171-5"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-81-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="년-3월.html#cb172-1"></a><span class="co"># IQ가 110 이하일 누적확률 계산</span></span>
<span id="cb172-2"><a href="년-3월.html#cb172-2"></a><span class="kw">pnorm</span>(<span class="dv">110</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 0.8413447</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="년-3월.html#cb174-1"></a><span class="co"># IQ가 110 초과일 누적확률 계산</span></span>
<span id="cb174-2"><a href="년-3월.html#cb174-2"></a><span class="kw">pnorm</span>(<span class="dv">110</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>, <span class="dt">lower.tail =</span> F) <span class="co"># 1 - pnorm(110, mean=100, sd=10)</span></span></code></pre></div>
<pre><code>## [1] 0.1586553</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="년-3월.html#cb176-1"></a><span class="kw">pnorm</span>(<span class="dv">0</span>) <span class="co"># 표준정규 분포를 가정정</span></span></code></pre></div>
<pre><code>## [1] 0.5</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="년-3월.html#cb178-1"></a><span class="kw">pnorm</span>(<span class="dv">0</span>, <span class="dt">mean=</span><span class="dv">0</span>, <span class="dt">sd=</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.5</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="년-3월.html#cb180-1"></a><span class="co"># 90 ~ 110 사이의 누적확률</span></span>
<span id="cb180-2"><a href="년-3월.html#cb180-2"></a><span class="kw">pnorm</span>(<span class="dv">110</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>) <span class="op">-</span><span class="st"> </span><span class="kw">pnorm</span>(<span class="dv">90</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 0.6826895</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="년-3월.html#cb182-1"></a><span class="kw">diff</span>(<span class="kw">pnorm</span>(<span class="kw">c</span>(<span class="dv">90</span>, <span class="dv">110</span>), <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>))</span></code></pre></div>
<pre><code>## [1] 0.6826895</code></pre>
<p>주어진 누적확률의 관측값을 알고자 할 때는 qnorm() 함수를 수행한다.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="년-3월.html#cb184-1"></a><span class="kw">qnorm</span>(<span class="fl">0.05</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 83.55146</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="년-3월.html#cb186-1"></a><span class="kw">qnorm</span>(<span class="fl">0.95</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 116.4485</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="년-3월.html#cb188-1"></a><span class="kw">qnorm</span>(<span class="kw">c</span>(<span class="fl">0.05</span>, <span class="fl">0.95</span>), <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1]  83.55146 116.44854</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="년-3월.html#cb190-1"></a><span class="kw">qnorm</span>(<span class="kw">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span></code></pre></div>
<pre><code>## [1] -1.959964  1.959964</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="년-3월.html#cb192-1"></a><span class="kw">rnorm</span>(<span class="dv">1</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 95.07461</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="년-3월.html#cb194-1"></a><span class="kw">rnorm</span>(<span class="dv">5</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1]  95.37173  98.49644  94.15030  82.73492 106.04025</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="년-3월.html#cb196-1"></a><span class="kw">rnorm</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.02687699</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="년-3월.html#cb198-1"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] -3.0469666  1.1075277 -0.6916751  0.1957096  0.2922544</code></pre>
</div>
<div id="데이터의-정규성-검정" class="section level3 hasAnchor">
<h3>데이터의 정규성 검정<a href="년-3월.html#데이터의-정규성-검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="년-3월.html#cb200-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb200-2"><a href="년-3월.html#cb200-2"></a><span class="kw">shapiro.test</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>)) <span class="co"># 정규분포</span></span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  rnorm(100, mean = 100, sd = 10)
## W = 0.99388, p-value = 0.9349</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="년-3월.html#cb202-1"></a><span class="kw">shapiro.test</span>(<span class="kw">runif</span>(<span class="dv">100</span>, <span class="dt">min=</span><span class="dv">2</span>, <span class="dt">max=</span><span class="dv">4</span>)) <span class="co"># 일항분포</span></span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  runif(100, min = 2, max = 4)
## W = 0.9454, p-value = 0.0004182</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="년-3월.html#cb204-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb204-2"><a href="년-3월.html#cb204-2"></a><span class="kw">qqnorm</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>), <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Sample from Normal Distribution&quot;</span>)</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-98-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="년-3월.html#cb205-1"></a><span class="kw">qqline</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-98-2.png" width="672" style="display: block; margin: auto;" />
x축은 이론적 정규 분포에 의해 생성된 표본이고 y축은 실제 표본이다.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="년-3월.html#cb206-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb206-2"><a href="년-3월.html#cb206-2"></a><span class="kw">qqnorm</span>(<span class="kw">runif</span>(<span class="dv">100</span>, <span class="dt">min=</span><span class="dv">2</span>, <span class="dt">max=</span><span class="dv">4</span>), <span class="dt">col=</span><span class="st">&quot;red&quot;</span>, <span class="dt">main =</span> <span class="st">&quot;Sample from Uniform Distribution&quot;</span>)</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-99-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="년-3월.html#cb207-1"></a><span class="kw">qqline</span>(<span class="kw">runif</span>(<span class="dv">100</span>, <span class="dt">min=</span><span class="dv">2</span>, <span class="dt">max=</span><span class="dv">4</span>))</span></code></pre></div>
<p><img src="Figures/unnamed-chunk-99-2.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="til20220304" class="section level2 hasAnchor">
<h2>TIL20220304<a href="년-3월.html#til20220304" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="가설검정" class="section level3 hasAnchor">
<h3>가설검정<a href="년-3월.html#가설검정" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>가설의 종류</strong></p>
<ul>
<li>대립가설(alternative hypothesis), 모집단에 대한 새로운 주장</li>
<li>귀무가설(null hypothesis), 기존의 주장</li>
</ul>
<p>통계적 검정(statistical test) 또는 가설검정(hypothesis test)이란 표본 데이터를 기반으로 모집단에 대한 새로운 주장의 옮고 그름을 추론하는 과정을 말한다.</p>
<p><strong>가설검정 절차</strong></p>
<p>귀무가설이 사실이라는 전제하에서 수행되며 일반적으로 다음과 같은 절차를 따른다.</p>
<ol style="list-style-type: decimal">
<li>표본으로부터 검정하고자 하는 <strong>검정통계량(test statistic)</strong> 계산</li>
<li>검정통계량과 그 <strong>확률분포</strong>로부터 p-값(p-value) 계산</li>
</ol>
<ul>
<li>귀무가설이 사실이라는 가정하에서 관측한 통계량과 같거나 그보다 더 극단적인 값이 발생할 확률을 의미</li>
<li>유의확률(significance probability)이라고도 함</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>p-값이 매우 작으면 귀무가설 기각</li>
</ol>
<ul>
<li>판단의 기준으로 사용하는 5% 또는 1%의 확률을 유의수준(significance level)이라고 함</li>
<li>표본으로부터 관측된 결과(즉 계산된 통계량)가 나타날 가능성이 5% 미만 또는 1% 미만이 되는 귀무가설을 기각하면 이를 통계적으로 유의하다(statistically significant)라고 표현함</li>
</ul>
<p><strong>가설검정과 검정력</strong></p>
<p><img src="http://www.ktword.co.kr/img_data/5094_2.JPG" />출처<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
</div>
<div id="확률분포" class="section level3 hasAnchor">
<h3>확률분포<a href="년-3월.html#확률분포" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="https://miro.medium.com/max/1400/1*fP1TTrA7TYD58rYgMHiL_A.png" />출처<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<p><strong>이항분포(binomial distribution)</strong></p>
<p>대표적인 이산확률분포(discrete probability distribution)로서 매회 어떤 사건이 일어날 확률이 동일한 독립 시행의 경우에 있어서 이 사건이 일어나는 횟수가 만들어 내는 분포이다. 예를 들면 동전 던지기로 동전을 일정 횟수 반복하여 던지는 실험에서 매 시행시마다 숫자면이 나타날 확률이 1/2이라고 할 때 숫자면이 나타나는 횟수는 이항분포를 따른다고 할 수 있다.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="년-3월.html#cb208-1"></a><span class="kw">dbinom</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="fl">0.5</span>)  <span class="co"># 10번 던져 숫자면이 7번 나타날 확률</span></span></code></pre></div>
<pre><code>## [1] 0.1171875</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="년-3월.html#cb210-1"></a><span class="kw">pbinom</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="fl">0.5</span>)  <span class="co"># 10번 던져 숫자면이 7번 이하가 나타날 확률</span></span></code></pre></div>
<pre><code>## [1] 0.9453125</code></pre>
<p>누적확률은 밀도함수의 합으로 계산이 가능하다.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="년-3월.html#cb212-1"></a><span class="kw">sum</span>(<span class="kw">dbinom</span>(<span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">7</span>), <span class="dv">10</span>, <span class="fl">0.5</span>)) <span class="co"># 0번, 1번, ..., 7번 나타날 확률의 합</span></span></code></pre></div>
<pre><code>## [1] 0.9453125</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="년-3월.html#cb214-1"></a><span class="kw">pbinom</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="fl">0.5</span>, <span class="dt">lower.tail =</span> F) <span class="co"># 1 - pbinom(7, 10, 0.5)</span></span></code></pre></div>
<pre><code>## [1] 0.0546875</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="년-3월.html#cb216-1"></a><span class="co"># 4번 이상 7번 이하 발생할 누적확률, 7번에서 4번의 누적확률을 빼서 계산</span></span>
<span id="cb216-2"><a href="년-3월.html#cb216-2"></a><span class="kw">pbinom</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="fl">0.5</span>) <span class="op">-</span><span class="st"> </span><span class="kw">pbinom</span>(<span class="dv">3</span>, <span class="dv">10</span>, <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## [1] 0.7734375</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="년-3월.html#cb218-1"></a><span class="kw">diff</span>(<span class="kw">pbinom</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">7</span>), <span class="dv">10</span>, <span class="fl">0.5</span>))</span></code></pre></div>
<pre><code>## [1] 0.7734375</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="년-3월.html#cb220-1"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb220-2"><a href="년-3월.html#cb220-2"></a><span class="kw">rbinom</span>(<span class="dv">1</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="년-3월.html#cb222-1"></a><span class="kw">rbinom</span>(<span class="dv">5</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## [1] 4 5 7 4 7</code></pre>
</div>
</div>
<div id="til20220303" class="section level2 hasAnchor">
<h2>TIL20220303<a href="년-3월.html#til20220303" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="데이터-요약" class="section level3 hasAnchor">
<h3>데이터 요약<a href="년-3월.html#데이터-요약" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="연속형-변수-요약" class="section level4 hasAnchor">
<h4>연속형 변수 요약<a href="년-3월.html#연속형-변수-요약" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="중심경향-지표" class="section level5 hasAnchor">
<h5>중심경향 지표<a href="년-3월.html#중심경향-지표" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>중심경향 지표(measures of central tendency)는 데이터가 특정 값을 중심으로 집중되어 있는 정도를 뜻한다.</p>
<ul>
<li>중위수(median)</li>
<li>백분위수(quantile, percentile)</li>
<li>사분위수(quartile)</li>
<li>평균(mean)</li>
</ul>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="년-3월.html#cb224-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(MASS)) <span class="kw">install.packages</span>(<span class="st">&quot;MASS&quot;</span>)</span>
<span id="cb224-2"><a href="년-3월.html#cb224-2"></a><span class="kw">library</span>(MASS) <span class="co"># for survey dataset</span></span></code></pre></div>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="년-3월.html#cb225-1"></a><span class="kw">median</span>(survey<span class="op">$</span>Pulse) <span class="co"># 결측, 즉 NA 값에 따른 결과</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="년-3월.html#cb227-1"></a><span class="kw">median</span>(survey<span class="op">$</span>Pulse, <span class="dt">na.rm=</span>T) <span class="co"># 결측값 제거 후 계산산</span></span></code></pre></div>
<pre><code>## [1] 72.5</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="년-3월.html#cb229-1"></a><span class="kw">quantile</span>(survey<span class="op">$</span>Pulse, <span class="dt">probs =</span> <span class="fl">0.5</span>, <span class="dt">na.rm =</span> T) <span class="co"># 중위수</span></span></code></pre></div>
<pre><code>##  50% 
## 72.5</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="년-3월.html#cb231-1"></a><span class="kw">quantile</span>(survey<span class="op">$</span>Pulse, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.05</span>, <span class="fl">0.95</span>), <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##    5%   95% 
## 59.55 92.00</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="년-3월.html#cb233-1"></a><span class="co"># Q1, ... Q4</span></span>
<span id="cb233-2"><a href="년-3월.html#cb233-2"></a><span class="kw">quantile</span>(survey<span class="op">$</span>Pulse, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##    0%   25%   50%   75%  100% 
##  35.0  66.0  72.5  80.0 104.0</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="년-3월.html#cb235-1"></a><span class="kw">quantile</span>(survey<span class="op">$</span>Pulse, <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.25</span>), <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##    0%   25%   50%   75%  100% 
##  35.0  66.0  72.5  80.0 104.0</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="년-3월.html#cb237-1"></a><span class="co"># 주어진 값으로 백분위수 계산</span></span>
<span id="cb237-2"><a href="년-3월.html#cb237-2"></a>survey<span class="op">$</span>Pulse <span class="op">&lt;=</span><span class="dv">80</span> <span class="co"># 80보다 작거나 같은 맥박수수</span></span></code></pre></div>
<pre><code>##   [1] FALSE FALSE FALSE    NA  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE
##  [13]    NA  TRUE  TRUE    NA FALSE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [37]    NA  TRUE  TRUE    NA    NA  TRUE  TRUE  TRUE  TRUE    NA FALSE FALSE
##  [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE  TRUE  TRUE    NA
##  [61]  TRUE  TRUE  TRUE    NA  TRUE    NA    NA  TRUE    NA  TRUE  TRUE    NA
##  [73]  TRUE  TRUE FALSE  TRUE  TRUE    NA  TRUE    NA  TRUE  TRUE FALSE    NA
##  [85] FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE    NA  TRUE    NA  TRUE    NA
##  [97]  TRUE  TRUE    NA  TRUE    NA  TRUE    NA  TRUE  TRUE  TRUE    NA FALSE
## [109]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE
## [121]  TRUE  TRUE FALSE  TRUE  TRUE    NA  TRUE  TRUE  TRUE FALSE FALSE  TRUE
## [133] FALSE  TRUE FALSE FALSE  TRUE  TRUE    NA  TRUE FALSE    NA  TRUE FALSE
## [145]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
## [157]    NA  TRUE    NA FALSE  TRUE    NA  TRUE  TRUE    NA FALSE  TRUE  TRUE
## [169]    NA  TRUE    NA  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE    NA  TRUE
## [181]  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
## [193]  TRUE  TRUE    NA  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
## [205]  TRUE FALSE  TRUE FALSE FALSE    NA  TRUE FALSE  TRUE  TRUE  TRUE    NA
## [217]    NA FALSE    NA  TRUE    NA  TRUE FALSE    NA    NA FALSE  TRUE  TRUE
## [229]  TRUE  TRUE  TRUE    NA FALSE FALSE    NA FALSE FALSE</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="년-3월.html#cb239-1"></a><span class="kw">mean</span>(survey<span class="op">$</span>Pulse <span class="op">&lt;=</span><span class="st"> </span><span class="dv">80</span>, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 0.7552083</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="년-3월.html#cb241-1"></a><span class="kw">mean</span>(survey<span class="op">$</span>Pulse, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 74.15104</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="년-3월.html#cb243-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(palmerpenguins)) <span class="kw">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span>
<span id="cb243-2"><a href="년-3월.html#cb243-2"></a><span class="kw">library</span>(palmerpenguins)</span></code></pre></div>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="년-3월.html#cb244-1"></a><span class="kw">summary</span>(penguins<span class="op">$</span>body_mass_g)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    2700    3550    4050    4202    4750    6300       2</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="년-3월.html#cb246-1"></a><span class="kw">summary</span>(penguins<span class="op">$</span>species)</span></code></pre></div>
<pre><code>##    Adelie Chinstrap    Gentoo 
##       152        68       124</code></pre>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="년-3월.html#cb248-1"></a><span class="kw">summary</span>(<span class="kw">as.character</span>(penguins<span class="op">$</span>species))</span></code></pre></div>
<pre><code>##    Length     Class      Mode 
##       344 character character</code></pre>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="년-3월.html#cb250-1"></a><span class="kw">summary</span>(penguins)</span></code></pre></div>
<pre><code>##       species          island    bill_length_mm  bill_depth_mm  
##  Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
##  Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
##  Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
##                                  Mean   :43.92   Mean   :17.15  
##                                  3rd Qu.:48.50   3rd Qu.:18.70  
##                                  Max.   :59.60   Max.   :21.50  
##                                  NA&#39;s   :2       NA&#39;s   :2      
##  flipper_length_mm  body_mass_g       sex           year     
##  Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
##  1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
##  Median :197.0     Median :4050   NA&#39;s  : 11   Median :2008  
##  Mean   :200.9     Mean   :4202                Mean   :2008  
##  3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
##  Max.   :231.0     Max.   :6300                Max.   :2009  
##  NA&#39;s   :2         NA&#39;s   :2</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="년-3월.html#cb252-1"></a><span class="co"># list 형태를 인자로 입력하는 경우</span></span>
<span id="cb252-2"><a href="년-3월.html#cb252-2"></a>penguins.list &lt;-<span class="st"> </span><span class="kw">as.list</span>(penguins)</span>
<span id="cb252-3"><a href="년-3월.html#cb252-3"></a><span class="kw">summary</span>(penguins.list)</span></code></pre></div>
<pre><code>##                   Length Class  Mode   
## species           344    factor numeric
## island            344    factor numeric
## bill_length_mm    344    -none- numeric
## bill_depth_mm     344    -none- numeric
## flipper_length_mm 344    -none- numeric
## body_mass_g       344    -none- numeric
## sex               344    factor numeric
## year              344    -none- numeric</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="년-3월.html#cb254-1"></a><span class="co"># lapply()를 통해 요약통계량 계산</span></span>
<span id="cb254-2"><a href="년-3월.html#cb254-2"></a><span class="kw">lapply</span>(penguins.list, summary)</span></code></pre></div>
<pre><code>## $species
##    Adelie Chinstrap    Gentoo 
##       152        68       124 
## 
## $island
##    Biscoe     Dream Torgersen 
##       168       124        52 
## 
## $bill_length_mm
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   32.10   39.23   44.45   43.92   48.50   59.60       2 
## 
## $bill_depth_mm
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   13.10   15.60   17.30   17.15   18.70   21.50       2 
## 
## $flipper_length_mm
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   172.0   190.0   197.0   200.9   213.0   231.0       2 
## 
## $body_mass_g
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    2700    3550    4050    4202    4750    6300       2 
## 
## $sex
## female   male   NA&#39;s 
##    165    168     11 
## 
## $year
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2007    2007    2008    2008    2009    2009</code></pre>
</div>
</div>
</div>
<div id="변동성-지표" class="section level3 hasAnchor">
<h3>변동성 지표<a href="년-3월.html#변동성-지표" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>변동성 지표(measures of variability)는 데이터의 산포 정도를 뜻한다.</p>
<ul>
<li>범위(range)</li>
<li>사분위 범위(interquartile range)</li>
<li>분산(variance)</li>
<li>표준편차(standard deviation)</li>
</ul>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="년-3월.html#cb256-1"></a><span class="kw">range</span>(survey<span class="op">$</span>Pulse, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1]  35 104</code></pre>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="년-3월.html#cb258-1"></a><span class="kw">var</span>(survey<span class="op">$</span>Pulse, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 136.5896</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="년-3월.html#cb260-1"></a><span class="kw">sd</span>(survey<span class="op">$</span>Pulse, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 11.68716</code></pre>
<p>R에서는 다양한 기술 통계량을 계산하는 함수들을 제공한다.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="년-3월.html#cb262-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(pastecs)) <span class="kw">install.packages</span>(<span class="st">&quot;pastecs&quot;</span>)</span></code></pre></div>
<pre><code>## Loading required package: pastecs</code></pre>
<pre><code>## 
## Attaching package: &#39;pastecs&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:xts&#39;:
## 
##     first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, last</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="년-3월.html#cb268-1"></a><span class="kw">library</span>(pastecs)</span></code></pre></div>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="년-3월.html#cb269-1"></a><span class="kw">stat.desc</span>(mtcars[<span class="kw">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;hp&quot;</span>, <span class="st">&quot;wt&quot;</span>)])</span></code></pre></div>
<pre><code>##                      mpg           hp          wt
## nbr.val       32.0000000   32.0000000  32.0000000
## nbr.null       0.0000000    0.0000000   0.0000000
## nbr.na         0.0000000    0.0000000   0.0000000
## min           10.4000000   52.0000000   1.5130000
## max           33.9000000  335.0000000   5.4240000
## range         23.5000000  283.0000000   3.9110000
## sum          642.9000000 4694.0000000 102.9520000
## median        19.2000000  123.0000000   3.3250000
## mean          20.0906250  146.6875000   3.2172500
## SE.mean        1.0654240   12.1203173   0.1729685
## CI.mean.0.95   2.1729465   24.7195501   0.3527715
## var           36.3241028 4700.8669355   0.9573790
## std.dev        6.0269481   68.5628685   0.9784574
## coef.var       0.2999881    0.4674077   0.3041285</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="년-3월.html#cb271-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(psych)) <span class="kw">install.packages</span>(<span class="st">&quot;psych&quot;</span>)</span></code></pre></div>
<pre><code>## Loading required package: psych</code></pre>
<pre><code>## 
## Attaching package: &#39;psych&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     %+%, alpha</code></pre>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="년-3월.html#cb275-1"></a><span class="kw">library</span>(psych)</span></code></pre></div>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="년-3월.html#cb276-1"></a><span class="kw">describe</span>(mtcars[<span class="kw">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;hp&quot;</span>, <span class="st">&quot;wt&quot;</span>)])</span></code></pre></div>
<pre><code>##     vars  n   mean    sd median trimmed   mad   min    max  range skew kurtosis
## mpg    1 32  20.09  6.03  19.20   19.70  5.41 10.40  33.90  23.50 0.61    -0.37
## hp     2 32 146.69 68.56 123.00  141.19 77.10 52.00 335.00 283.00 0.73    -0.14
## wt     3 32   3.22  0.98   3.33    3.15  0.77  1.51   5.42   3.91 0.42    -0.02
##        se
## mpg  1.07
## hp  12.12
## wt   0.17</code></pre>
<p>집단별 기술 통계량을 계산한다.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="년-3월.html#cb278-1"></a><span class="kw">levels</span>(survey<span class="op">$</span>Exer)</span></code></pre></div>
<pre><code>## [1] &quot;Freq&quot; &quot;None&quot; &quot;Some&quot;</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="년-3월.html#cb280-1"></a><span class="kw">tapply</span>(survey<span class="op">$</span>Pulse, survey<span class="op">$</span>Exer, mean, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##     Freq     None     Some 
## 71.96842 76.76471 76.18750</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="년-3월.html#cb282-1"></a><span class="kw">tapply</span>(survey<span class="op">$</span>Pulse, <span class="kw">list</span>(survey<span class="op">$</span>Exer, survey<span class="op">$</span>Sex), mean, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##        Female     Male
## Freq 73.60976 70.67925
## None 71.42857 80.50000
## Some 77.00000 75.03030</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="년-3월.html#cb284-1"></a><span class="kw">aggregate</span>(survey<span class="op">$</span>Pulse, <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer, <span class="dt">Sex=</span>survey<span class="op">$</span>Sex), mean, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##   Exercise    Sex        x
## 1     Freq Female 73.60976
## 2     None Female 71.42857
## 3     Some Female 77.00000
## 4     Freq   Male 70.67925
## 5     None   Male 80.50000
## 6     Some   Male 75.03030</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="년-3월.html#cb286-1"></a><span class="kw">aggregate</span>(survey[<span class="kw">c</span>(<span class="st">&quot;Pulse&quot;</span>, <span class="st">&quot;Age&quot;</span>)],</span>
<span id="cb286-2"><a href="년-3월.html#cb286-2"></a>          <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer, <span class="dt">Sex=</span>survey<span class="op">$</span>Sex), </span>
<span id="cb286-3"><a href="년-3월.html#cb286-3"></a>          mean, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##   Exercise    Sex    Pulse      Age
## 1     Freq Female 73.60976 20.11229
## 2     None Female 71.42857 22.32582
## 3     Some Female 77.00000 20.29316
## 4     Freq   Male 70.67925 20.50257
## 5     None   Male 80.50000 20.75646
## 6     Some   Male 75.03030 19.91675</code></pre>
<p>aggregate()는 FUN 인수에 사용자 정의 함수를 사용할 수 있다.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="년-3월.html#cb288-1"></a>myStats &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">na.rm =</span> F) {</span>
<span id="cb288-2"><a href="년-3월.html#cb288-2"></a>  <span class="cf">if</span>(na.rm) x &lt;-<span class="st"> </span>x[<span class="op">!</span><span class="kw">is.na</span>(x)]</span>
<span id="cb288-3"><a href="년-3월.html#cb288-3"></a>  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</span>
<span id="cb288-4"><a href="년-3월.html#cb288-4"></a>  mean &lt;-<span class="st"> </span><span class="kw">mean</span>(x)</span>
<span id="cb288-5"><a href="년-3월.html#cb288-5"></a>  sd &lt;-<span class="st"> </span><span class="kw">sd</span>(x)</span>
<span id="cb288-6"><a href="년-3월.html#cb288-6"></a>  skew &lt;-<span class="st"> </span><span class="kw">sum</span>((x<span class="op">-</span>mean)<span class="op">^</span><span class="dv">3</span><span class="op">/</span>sd<span class="op">^</span><span class="dv">3</span>)<span class="op">/</span>n</span>
<span id="cb288-7"><a href="년-3월.html#cb288-7"></a>  kurt &lt;-<span class="st"> </span><span class="kw">sum</span>((x<span class="op">-</span>mean)<span class="op">^</span><span class="dv">4</span><span class="op">/</span>sd<span class="op">^</span><span class="dv">4</span>)<span class="op">/</span>n <span class="op">-</span><span class="st"> </span><span class="dv">3</span></span>
<span id="cb288-8"><a href="년-3월.html#cb288-8"></a>  <span class="kw">return</span>(<span class="kw">c</span>(<span class="dt">n=</span>n, <span class="dt">mean=</span>mean, <span class="dt">sd=</span>sd, <span class="dt">skewness=</span>skew, <span class="dt">kurtosis=</span>kurt))</span>
<span id="cb288-9"><a href="년-3월.html#cb288-9"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="년-3월.html#cb289-1"></a><span class="kw">aggregate</span>(survey<span class="op">$</span>Pulse, <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer, <span class="dt">Sex=</span>survey<span class="op">$</span>Sex), myStats, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>##   Exercise    Sex          x.n       x.mean         x.sd   x.skewness
## 1     Freq Female 41.000000000 73.609756098 12.491753377 -0.007083877
## 2     None Female  7.000000000 71.428571429 11.414276775 -0.582777800
## 3     Some Female 47.000000000 77.000000000 10.270260993 -0.057861601
## 4     Freq   Male 53.000000000 70.679245283  9.593213917  0.484695772
## 5     None   Male 10.000000000 80.500000000 15.204166096  0.148604585
## 6     Some   Male 33.000000000 75.030303030 13.501122288 -0.674836829
##     x.kurtosis
## 1  0.443768611
## 2 -0.795725215
## 3 -0.215883000
## 4  0.543653114
## 5 -1.649344568
## 6  0.299978722</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="년-3월.html#cb291-1"></a><span class="kw">by</span>(survey[<span class="kw">c</span>(<span class="st">&quot;Pulse&quot;</span>, <span class="st">&quot;Age&quot;</span>)], </span>
<span id="cb291-2"><a href="년-3월.html#cb291-2"></a>   <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer, <span class="dt">Sex=</span>survey<span class="op">$</span>Sex), </span>
<span id="cb291-3"><a href="년-3월.html#cb291-3"></a>   summary)</span></code></pre></div>
<pre><code>## Exercise: Freq
## Sex: Female
##      Pulse             Age       
##  Min.   : 40.00   Min.   :16.92  
##  1st Qu.: 68.00   1st Qu.:17.42  
##  Median : 72.00   Median :18.50  
##  Mean   : 73.61   Mean   :20.11  
##  3rd Qu.: 80.00   3rd Qu.:20.17  
##  Max.   :104.00   Max.   :39.75  
##  NA&#39;s   :8                       
## ------------------------------------------------------------ 
## Exercise: None
## Sex: Female
##      Pulse            Age       
##  Min.   :50.00   Min.   :17.17  
##  1st Qu.:69.00   1st Qu.:18.54  
##  Median :70.00   Median :19.83  
##  Mean   :71.43   Mean   :22.33  
##  3rd Qu.:78.00   3rd Qu.:20.79  
##  Max.   :86.00   Max.   :41.58  
##  NA&#39;s   :4                      
## ------------------------------------------------------------ 
## Exercise: Some
## Sex: Female
##      Pulse            Age       
##  Min.   : 50.0   Min.   :16.92  
##  1st Qu.: 70.0   1st Qu.:17.50  
##  Median : 76.0   Median :18.21  
##  Mean   : 77.0   Mean   :20.29  
##  3rd Qu.: 83.5   3rd Qu.:19.15  
##  Max.   :100.0   Max.   :73.00  
##  NA&#39;s   :11                     
## ------------------------------------------------------------ 
## Exercise: Freq
## Sex: Male
##      Pulse             Age       
##  Min.   : 48.00   Min.   :17.17  
##  1st Qu.: 64.00   1st Qu.:17.92  
##  Median : 70.00   Median :18.58  
##  Mean   : 70.68   Mean   :20.50  
##  3rd Qu.: 76.00   3rd Qu.:20.33  
##  Max.   :100.00   Max.   :70.42  
##  NA&#39;s   :12                      
## ------------------------------------------------------------ 
## Exercise: None
## Sex: Male
##      Pulse             Age       
##  Min.   : 60.00   Min.   :16.92  
##  1st Qu.: 68.00   1st Qu.:18.17  
##  Median : 80.00   Median :18.92  
##  Mean   : 80.50   Mean   :20.76  
##  3rd Qu.: 93.75   3rd Qu.:19.67  
##  Max.   :104.00   Max.   :43.83  
##  NA&#39;s   :3                       
## ------------------------------------------------------------ 
## Exercise: Some
## Sex: Male
##      Pulse            Age       
##  Min.   :35.00   Min.   :16.75  
##  1st Qu.:66.00   1st Qu.:18.31  
##  Median :75.00   Median :18.92  
##  Mean   :75.03   Mean   :19.92  
##  3rd Qu.:85.00   3rd Qu.:20.04  
##  Max.   :96.00   Max.   :35.50  
##  NA&#39;s   :7</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="년-3월.html#cb293-1"></a><span class="kw">aggregate</span>(survey[<span class="kw">c</span>(<span class="st">&quot;Pulse&quot;</span>, <span class="st">&quot;Age&quot;</span>)], </span>
<span id="cb293-2"><a href="년-3월.html#cb293-2"></a>   <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer, <span class="dt">Sex=</span>survey<span class="op">$</span>Sex), </span>
<span id="cb293-3"><a href="년-3월.html#cb293-3"></a>   summary)</span></code></pre></div>
<pre><code>##   Exercise    Sex Pulse.Min. Pulse.1st Qu. Pulse.Median Pulse.Mean
## 1     Freq Female   40.00000      68.00000     72.00000   73.60976
## 2     None Female   50.00000      69.00000     70.00000   71.42857
## 3     Some Female   50.00000      70.00000     76.00000   77.00000
## 4     Freq   Male   48.00000      64.00000     70.00000   70.67925
## 5     None   Male   60.00000      68.00000     80.00000   80.50000
## 6     Some   Male   35.00000      66.00000     75.00000   75.03030
##   Pulse.3rd Qu. Pulse.Max. Pulse.NA&#39;s Age.Min. Age.1st Qu. Age.Median Age.Mean
## 1      80.00000  104.00000    8.00000 16.91700    17.41700   18.50000 20.11229
## 2      78.00000   86.00000    4.00000 17.16700    18.54200   19.83300 22.32582
## 3      83.50000  100.00000   11.00000 16.91700    17.50000   18.20850 20.29316
## 4      76.00000  100.00000   12.00000 17.16700    17.91700   18.58300 20.50257
## 5      93.75000  104.00000    3.00000 16.91700    18.16700   18.91700 20.75646
## 6      85.00000   96.00000    7.00000 16.75000    18.31225   18.91700 19.91675
##   Age.3rd Qu. Age.Max.
## 1    20.16700 39.75000
## 2    20.79150 41.58300
## 3    19.14600 73.00000
## 4    20.33300 70.41700
## 5    19.66700 43.83300
## 6    20.04200 35.50000</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="년-3월.html#cb295-1"></a><span class="kw">by</span>(survey[<span class="kw">c</span>(<span class="st">&quot;Pulse&quot;</span>, <span class="st">&quot;Age&quot;</span>)], </span>
<span id="cb295-2"><a href="년-3월.html#cb295-2"></a>   <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer, <span class="dt">Sex=</span>survey<span class="op">$</span>Sex), </span>
<span id="cb295-3"><a href="년-3월.html#cb295-3"></a>   <span class="cf">function</span>(x) <span class="kw">sapply</span>(x, myStats, <span class="dt">na.rm=</span>T))</span></code></pre></div>
<pre><code>## Exercise: Freq
## Sex: Female
##                 Pulse       Age
## n        41.000000000 49.000000
## mean     73.609756098 20.112286
## sd       12.491753377  4.831792
## skewness -0.007083877  2.455680
## kurtosis  0.443768611  5.815635
## ------------------------------------------------------------ 
## Exercise: None
## Sex: Female
##               Pulse       Age
## n         7.0000000 11.000000
## mean     71.4285714 22.325818
## sd       11.4142768  7.345709
## skewness -0.5827778  1.687717
## kurtosis -0.7957252  1.500502
## ------------------------------------------------------------ 
## Exercise: Some
## Sex: Female
##               Pulse       Age
## n        47.0000000 58.000000
## mean     77.0000000 20.293155
## sd       10.2702610  8.244537
## skewness -0.0578616  4.976422
## kurtosis -0.2158830 27.133862
## ------------------------------------------------------------ 
## Exercise: Freq
## Sex: Male
##               Pulse       Age
## n        53.0000000 65.000000
## mean     70.6792453 20.502569
## sd        9.5932139  7.098771
## skewness  0.4846958  5.585797
## kurtosis  0.5436531 35.161334
## ------------------------------------------------------------ 
## Exercise: None
## Sex: Male
##               Pulse       Age
## n        10.0000000 13.000000
## mean     80.5000000 20.756462
## sd       15.2041661  7.024934
## skewness  0.1486046  2.688832
## kurtosis -1.6493446  5.973724
## ------------------------------------------------------------ 
## Exercise: Some
## Sex: Male
##               Pulse       Age
## n        33.0000000 40.000000
## mean     75.0303030 19.916750
## sd       13.5011223  3.516292
## skewness -0.6748368  2.719822
## kurtosis  0.2999787  8.174582</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="년-3월.html#cb297-1"></a><span class="kw">describeBy</span>(survey[<span class="kw">c</span>(<span class="st">&quot;Pulse&quot;</span>, <span class="st">&quot;Age&quot;</span>)], <span class="dt">group =</span> <span class="kw">list</span>(<span class="dt">Exercise=</span>survey<span class="op">$</span>Exer))</span></code></pre></div>
<pre><code>## 
##  Descriptive statistics by group 
## Exercise: Freq
##       vars   n  mean    sd median trimmed   mad   min    max range skew
## Pulse    1  95 71.97 10.93   71.0   71.57 10.38 40.00 104.00  64.0 0.28
## Age      2 115 20.34  6.18   18.5   19.08  1.61 16.92  70.42  53.5 5.32
##       kurtosis   se
## Pulse     0.73 1.12
## Age      36.42 0.58
## ------------------------------------------------------------ 
## Exercise: None
##       vars  n  mean    sd median trimmed   mad   min    max range skew kurtosis
## Pulse    1 17 76.76 14.14  76.00   76.73 11.86 50.00 104.00 54.00 0.20    -0.79
## Age      2 24 21.48  7.06  19.33   19.80  1.61 16.92  43.83 26.92 2.32     4.09
##         se
## Pulse 3.43
## Age   1.44
## ------------------------------------------------------------ 
## Exercise: Some
##       vars  n  mean    sd median trimmed   mad   min max range  skew kurtosis
## Pulse    1 80 76.19 11.67  76.00   76.66 11.86 35.00 100 65.00 -0.52     0.63
## Age      2 98 20.14  6.70  18.54   18.80  1.54 16.75  73 56.25  5.69    38.61
##         se
## Pulse 1.30
## Age   0.68</code></pre>
</div>
</div>
<div id="til20220302" class="section level2 hasAnchor">
<h2>TIL20220302<a href="년-3월.html#til20220302" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="데이터-요약-1" class="section level3 hasAnchor">
<h3>데이터 요약<a href="년-3월.html#데이터-요약-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="범주형-변수-요약" class="section level4 hasAnchor">
<h4>범주형 변수 요약<a href="년-3월.html#범주형-변수-요약" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="비율-계산" class="section level5 hasAnchor">
<h5>비율 계산<a href="년-3월.html#비율-계산" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="년-3월.html#cb299-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(MASS)) <span class="kw">install.packages</span>(<span class="st">&quot;MASS&quot;</span>)</span>
<span id="cb299-2"><a href="년-3월.html#cb299-2"></a><span class="kw">library</span>(MASS)</span></code></pre></div>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="년-3월.html#cb300-1"></a>survey<span class="op">$</span>Smoke<span class="op">==</span><span class="st">&quot;Never&quot;</span> <span class="co"># 비흡연자에 대한 논리연산</span></span></code></pre></div>
<pre><code>##   [1]  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [13]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE
##  [37]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
##  [49] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
##  [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE    NA  TRUE FALSE
##  [73]  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
##  [85]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
##  [97] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE
## [109]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE
## [121] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE
## [133]  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [145]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
## [157] FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE
## [169]  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE
## [181] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [193] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE
## [205] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [217]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
## [229] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="년-3월.html#cb302-1"></a><span class="kw">mean</span>(survey<span class="op">$</span>Smoke<span class="op">==</span><span class="st">&quot;Never&quot;</span>, <span class="dt">na.rm =</span> T) <span class="co"># 비흡연자에 대한 비율</span></span></code></pre></div>
<pre><code>## [1] 0.8008475</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="년-3월.html#cb304-1"></a><span class="kw">head</span>(anorexia)</span></code></pre></div>
<pre><code>##   Treat Prewt Postwt
## 1  Cont  80.7   80.2
## 2  Cont  89.4   80.1
## 3  Cont  91.8   86.4
## 4  Cont  74.0   86.3
## 5  Cont  78.1   76.1
## 6  Cont  88.3   78.1</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="년-3월.html#cb306-1"></a>anorexia<span class="op">$</span>Postwt <span class="op">&gt;</span><span class="st"> </span>anorexia<span class="op">$</span>Prewt <span class="co"># 치료 후의 몸무게가 치료 전의 몸무게보다 큰가?</span></span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE
## [13]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
## [25]  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE
## [37]  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE
## [49]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
## [61] FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="년-3월.html#cb308-1"></a><span class="kw">mean</span>(anorexia<span class="op">$</span>Postwt <span class="op">&gt;</span><span class="st"> </span>anorexia<span class="op">$</span>Prewt)</span></code></pre></div>
<pre><code>## [1] 0.5833333</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="년-3월.html#cb310-1"></a><span class="kw">head</span>(mammals)</span></code></pre></div>
<pre><code>##                    body brain
## Arctic fox        3.385  44.5
## Owl monkey        0.480  15.5
## Mountain beaver   1.350   8.1
## Cow             465.000 423.0
## Grey wolf        36.330 119.5
## Goat             27.660 115.0</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="년-3월.html#cb312-1"></a><span class="co"># 두뇌의 무게가 2개의 표준편차보다 큰 논리연산식</span></span>
<span id="cb312-2"><a href="년-3월.html#cb312-2"></a><span class="kw">abs</span>(mammals<span class="op">$</span>brain <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(mammals<span class="op">$</span>brain)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span><span class="kw">sd</span>(mammals<span class="op">$</span>brain)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
## [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [61] FALSE FALSE</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="년-3월.html#cb314-1"></a><span class="kw">mean</span>(<span class="kw">abs</span>(mammals<span class="op">$</span>brain <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(mammals<span class="op">$</span>brain)) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span><span class="kw">sd</span>(mammals<span class="op">$</span>brain))</span></code></pre></div>
<pre><code>## [1] 0.03225806</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="년-3월.html#cb316-1"></a><span class="kw">head</span>(SP500)</span></code></pre></div>
<pre><code>## [1] -0.2588908 -0.8650307 -0.9804139  0.4504321 -1.1856666 -0.6629097</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="년-3월.html#cb318-1"></a><span class="co"># 수익률이 전일보다 증가한 일자 논리식</span></span>
<span id="cb318-2"><a href="년-3월.html#cb318-2"></a><span class="kw">head</span>(<span class="kw">diff</span>(SP500) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="년-3월.html#cb320-1"></a><span class="kw">mean</span>(<span class="kw">diff</span>(SP500) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] 0.4857863</code></pre>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="년-3월.html#cb322-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(vcd)) <span class="kw">install.packages</span>(<span class="st">&quot;vcd&quot;</span>)</span></code></pre></div>
<pre><code>## Loading required package: vcd</code></pre>
<pre><code>## Loading required package: grid</code></pre>
<pre><code>## 
## Attaching package: &#39;vcd&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:PerformanceAnalytics&#39;:
## 
##     Kappa</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="년-3월.html#cb327-1"></a><span class="kw">library</span>(vcd)</span></code></pre></div>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="년-3월.html#cb328-1"></a><span class="kw">str</span>(Arthritis) <span class="co"># 류마티스 관절염 치료 효과</span></span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    84 obs. of  5 variables:
##  $ ID       : int  57 46 77 17 36 23 75 39 33 55 ...
##  $ Treatment: Factor w/ 2 levels &quot;Placebo&quot;,&quot;Treated&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Sex      : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ Age      : int  27 29 30 32 46 58 59 59 63 63 ...
##  $ Improved : Ord.factor w/ 3 levels &quot;None&quot;&lt;&quot;Some&quot;&lt;..: 2 1 1 3 3 3 1 3 1 1 ...</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="년-3월.html#cb330-1"></a><span class="kw">levels</span>(Arthritis<span class="op">$</span>Treatment)</span></code></pre></div>
<pre><code>## [1] &quot;Placebo&quot; &quot;Treated&quot;</code></pre>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="년-3월.html#cb332-1"></a><span class="kw">levels</span>(Arthritis<span class="op">$</span>Improved)</span></code></pre></div>
<pre><code>## [1] &quot;None&quot;   &quot;Some&quot;   &quot;Marked&quot;</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="년-3월.html#cb334-1"></a>crosstab &lt;-<span class="st"> </span><span class="kw">table</span>(Arthritis<span class="op">$</span>Improved, Arthritis<span class="op">$</span>Treatment,</span>
<span id="cb334-2"><a href="년-3월.html#cb334-2"></a>                  <span class="dt">dnn=</span><span class="kw">c</span>(<span class="st">&quot;Improved&quot;</span>, <span class="st">&quot;Treatment&quot;</span>))</span>
<span id="cb334-3"><a href="년-3월.html#cb334-3"></a>crosstab</span></code></pre></div>
<pre><code>##         Treatment
## Improved Placebo Treated
##   None        29      13
##   Some         7       7
##   Marked       7      21</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="년-3월.html#cb336-1"></a>crosstab[<span class="st">&quot;Marked&quot;</span>, <span class="st">&quot;Treated&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 21</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="년-3월.html#cb338-1"></a>crosstab &lt;-<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>Improved <span class="op">+</span><span class="st"> </span>Treatment, <span class="dt">data =</span> Arthritis)</span>
<span id="cb338-2"><a href="년-3월.html#cb338-2"></a>crosstab</span></code></pre></div>
<pre><code>##         Treatment
## Improved Placebo Treated
##   None        29      13
##   Some         7       7
##   Marked       7      21</code></pre>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="년-3월.html#cb340-1"></a><span class="kw">margin.table</span>(crosstab, <span class="dt">margin =</span> <span class="dv">1</span>) <span class="co"># 행</span></span></code></pre></div>
<pre><code>## Improved
##   None   Some Marked 
##     42     14     28</code></pre>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="년-3월.html#cb342-1"></a><span class="kw">margin.table</span>(crosstab, <span class="dt">margin =</span> <span class="dv">2</span>) <span class="co"># 열</span></span></code></pre></div>
<pre><code>## Treatment
## Placebo Treated 
##      43      41</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="년-3월.html#cb344-1"></a><span class="kw">prop.table</span>(crosstab, <span class="dt">margin =</span> <span class="dv">1</span>) <span class="co"># 행의 합이 1</span></span></code></pre></div>
<pre><code>##         Treatment
## Improved   Placebo   Treated
##   None   0.6904762 0.3095238
##   Some   0.5000000 0.5000000
##   Marked 0.2500000 0.7500000</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="년-3월.html#cb346-1"></a><span class="kw">prop.table</span>(crosstab, <span class="dt">margin =</span> <span class="dv">2</span>) <span class="co"># 열의 합이 1</span></span></code></pre></div>
<pre><code>##         Treatment
## Improved   Placebo   Treated
##   None   0.6744186 0.3170732
##   Some   0.1627907 0.1707317
##   Marked 0.1627907 0.5121951</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="년-3월.html#cb348-1"></a><span class="kw">prop.table</span>(crosstab)</span></code></pre></div>
<pre><code>##         Treatment
## Improved    Placebo    Treated
##   None   0.34523810 0.15476190
##   Some   0.08333333 0.08333333
##   Marked 0.08333333 0.25000000</code></pre>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="년-3월.html#cb350-1"></a><span class="kw">addmargins</span>(crosstab, <span class="dt">margin =</span> <span class="dv">1</span>) <span class="co"># 합의 행을 생성</span></span></code></pre></div>
<pre><code>##         Treatment
## Improved Placebo Treated
##   None        29      13
##   Some         7       7
##   Marked       7      21
##   Sum         43      41</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="년-3월.html#cb352-1"></a><span class="kw">addmargins</span>(crosstab, <span class="dt">margin =</span> <span class="dv">2</span>) <span class="co"># 합의 열을 생성</span></span></code></pre></div>
<pre><code>##         Treatment
## Improved Placebo Treated Sum
##   None        29      13  42
##   Some         7       7  14
##   Marked       7      21  28</code></pre>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="년-3월.html#cb354-1"></a><span class="kw">addmargins</span>(crosstab)</span></code></pre></div>
<pre><code>##         Treatment
## Improved Placebo Treated Sum
##   None        29      13  42
##   Some         7       7  14
##   Marked       7      21  28
##   Sum         43      41  84</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="년-3월.html#cb356-1"></a><span class="kw">addmargins</span>(<span class="kw">prop.table</span>(crosstab, <span class="dt">margin =</span> <span class="dv">2</span>), <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##         Treatment
## Improved   Placebo   Treated
##   None   0.6744186 0.3170732
##   Some   0.1627907 0.1707317
##   Marked 0.1627907 0.5121951
##   Sum    1.0000000 1.0000000</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="년-3월.html#cb358-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(gmodels)) <span class="kw">install.packages</span>(<span class="st">&quot;gmodels&quot;</span>)</span></code></pre></div>
<pre><code>## Loading required package: gmodels</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="년-3월.html#cb360-1"></a><span class="kw">library</span>(gmodels)</span></code></pre></div>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="년-3월.html#cb361-1"></a><span class="kw">CrossTable</span>(Arthritis<span class="op">$</span>Improved, Arthritis<span class="op">$</span>Treatment,</span>
<span id="cb361-2"><a href="년-3월.html#cb361-2"></a>           <span class="dt">dnn=</span><span class="kw">c</span>(<span class="st">&quot;Improved&quot;</span>, <span class="st">&quot;Treatment&quot;</span>))</span></code></pre></div>
<pre><code>## 
##  
##    Cell Contents
## |-------------------------|
## |                       N |
## | Chi-square contribution |
## |           N / Row Total |
## |           N / Col Total |
## |         N / Table Total |
## |-------------------------|
## 
##  
## Total Observations in Table:  84 
## 
##  
##              | Treatment 
##     Improved |   Placebo |   Treated | Row Total | 
## -------------|-----------|-----------|-----------|
##         None |        29 |        13 |        42 | 
##              |     2.616 |     2.744 |           | 
##              |     0.690 |     0.310 |     0.500 | 
##              |     0.674 |     0.317 |           | 
##              |     0.345 |     0.155 |           | 
## -------------|-----------|-----------|-----------|
##         Some |         7 |         7 |        14 | 
##              |     0.004 |     0.004 |           | 
##              |     0.500 |     0.500 |     0.167 | 
##              |     0.163 |     0.171 |           | 
##              |     0.083 |     0.083 |           | 
## -------------|-----------|-----------|-----------|
##       Marked |         7 |        21 |        28 | 
##              |     3.752 |     3.935 |           | 
##              |     0.250 |     0.750 |     0.333 | 
##              |     0.163 |     0.512 |           | 
##              |     0.083 |     0.250 |           | 
## -------------|-----------|-----------|-----------|
## Column Total |        43 |        41 |        84 | 
##              |     0.512 |     0.488 |           | 
## -------------|-----------|-----------|-----------|
## 
## </code></pre>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="년-3월.html#cb363-1"></a>multtab &lt;-<span class="st"> </span><span class="kw">table</span>(Arthritis<span class="op">$</span>Improved, Arthritis<span class="op">$</span>Sex, Arthritis<span class="op">$</span>Treatment)</span>
<span id="cb363-2"><a href="년-3월.html#cb363-2"></a>multtab</span></code></pre></div>
<pre><code>## , ,  = Placebo
## 
##         
##          Female Male
##   None       19   10
##   Some        7    0
##   Marked      6    1
## 
## , ,  = Treated
## 
##         
##          Female Male
##   None        6    7
##   Some        5    2
##   Marked     16    5</code></pre>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="년-3월.html#cb365-1"></a>multtab &lt;-<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>Improved <span class="op">+</span><span class="st"> </span>Sex <span class="op">+</span><span class="st"> </span>Treatment, <span class="dt">data =</span> Arthritis)</span>
<span id="cb365-2"><a href="년-3월.html#cb365-2"></a>multtab</span></code></pre></div>
<pre><code>## , , Treatment = Placebo
## 
##         Sex
## Improved Female Male
##   None       19   10
##   Some        7    0
##   Marked      6    1
## 
## , , Treatment = Treated
## 
##         Sex
## Improved Female Male
##   None        6    7
##   Some        5    2
##   Marked     16    5</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="년-3월.html#cb367-1"></a><span class="kw">ftable</span>(multtab)</span></code></pre></div>
<pre><code>##                 Treatment Placebo Treated
## Improved Sex                             
## None     Female                19       6
##          Male                  10       7
## Some     Female                 7       5
##          Male                   0       2
## Marked   Female                 6      16
##          Male                   1       5</code></pre>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="년-3월.html#cb369-1"></a><span class="kw">ftable</span>(multtab, <span class="dt">row.vars =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span></code></pre></div>
<pre><code>##                  Improved None Some Marked
## Sex    Treatment                          
## Female Placebo              19    7      6
##        Treated               6    5     16
## Male   Placebo              10    0      1
##        Treated               7    2      5</code></pre>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="년-3월.html#cb371-1"></a><span class="kw">ftable</span>(Arthritis[<span class="kw">c</span>(<span class="st">&quot;Improved&quot;</span>, <span class="st">&quot;Sex&quot;</span>, <span class="st">&quot;Treatment&quot;</span>)], <span class="dt">row.vars =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span></code></pre></div>
<pre><code>##                  Improved None Some Marked
## Sex    Treatment                          
## Female Placebo              19    7      6
##        Treated               6    5     16
## Male   Placebo              10    0      1
##        Treated               7    2      5</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="년-3월.html#cb373-1"></a><span class="kw">margin.table</span>(multtab, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Improved
##   None   Some Marked 
##     42     14     28</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="년-3월.html#cb375-1"></a><span class="kw">margin.table</span>(multtab, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Sex
## Female   Male 
##     59     25</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="년-3월.html#cb377-1"></a><span class="kw">margin.table</span>(multtab, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## Treatment
## Placebo Treated 
##      43      41</code></pre>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="년-3월.html#cb379-1"></a><span class="kw">ftable</span>(<span class="kw">prop.table</span>(multtab, <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)))</span></code></pre></div>
<pre><code>##                 Treatment    Placebo    Treated
## Improved Sex                                   
## None     Female           0.59375000 0.22222222
##          Male             0.90909091 0.50000000
## Some     Female           0.21875000 0.18518519
##          Male             0.00000000 0.14285714
## Marked   Female           0.18750000 0.59259259
##          Male             0.09090909 0.35714286</code></pre>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="년-3월.html#cb381-1"></a><span class="kw">ftable</span>(<span class="kw">addmargins</span>(<span class="kw">prop.table</span>(multtab, <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))))</span></code></pre></div>
<pre><code>##                 Treatment    Placebo    Treated        Sum
## Improved Sex                                              
## None     Female           0.59375000 0.22222222 0.81597222
##          Male             0.90909091 0.50000000 1.40909091
##          Sum              1.50284091 0.72222222 2.22506313
## Some     Female           0.21875000 0.18518519 0.40393519
##          Male             0.00000000 0.14285714 0.14285714
##          Sum              0.21875000 0.32804233 0.54679233
## Marked   Female           0.18750000 0.59259259 0.78009259
##          Male             0.09090909 0.35714286 0.44805195
##          Sum              0.27840909 0.94973545 1.22814454
## Sum      Female           1.00000000 1.00000000 2.00000000
##          Male             1.00000000 1.00000000 2.00000000
##          Sum              2.00000000 2.00000000 4.00000000</code></pre>
</div>
</div>
</div>
</div>
<div id="til20220301" class="section level2 hasAnchor">
<h2>TIL20220301<a href="년-3월.html#til20220301" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="데이터-요약-2" class="section level3 hasAnchor">
<h3>데이터 요약<a href="년-3월.html#데이터-요약-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="범주형-변수-요약-1" class="section level4 hasAnchor">
<h4>범주형 변수 요약<a href="년-3월.html#범주형-변수-요약-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>기술통계와 추론통계, 대부분은 모집단을 설명하는 추론통계이지만 모집단을 잘 설명하기 위해서는 표본집단을 잘 이해사고 적절한 통계기법을 선택하는 것이 중요하다.</p>
<div id="빈도표" class="section level5 hasAnchor">
<h5>빈도표<a href="년-3월.html#빈도표" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="년-3월.html#cb383-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(MASS)) <span class="kw">install.packages</span>(<span class="st">&quot;MASS&quot;</span>)</span>
<span id="cb383-2"><a href="년-3월.html#cb383-2"></a><span class="kw">library</span>(MASS)</span></code></pre></div>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="년-3월.html#cb384-1"></a><span class="kw">str</span>(survey)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    237 obs. of  12 variables:
##  $ Sex   : Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 1 2 2 2 2 1 2 1 2 2 ...
##  $ Wr.Hnd: num  18.5 19.5 18 18.8 20 18 17.7 17 20 18.5 ...
##  $ NW.Hnd: num  18 20.5 13.3 18.9 20 17.7 17.7 17.3 19.5 18.5 ...
##  $ W.Hnd : Factor w/ 2 levels &quot;Left&quot;,&quot;Right&quot;: 2 1 2 2 2 2 2 2 2 2 ...
##  $ Fold  : Factor w/ 3 levels &quot;L on R&quot;,&quot;Neither&quot;,..: 3 3 1 3 2 1 1 3 3 3 ...
##  $ Pulse : int  92 104 87 NA 35 64 83 74 72 90 ...
##  $ Clap  : Factor w/ 3 levels &quot;Left&quot;,&quot;Neither&quot;,..: 1 1 2 2 3 3 3 3 3 3 ...
##  $ Exer  : Factor w/ 3 levels &quot;Freq&quot;,&quot;None&quot;,..: 3 2 2 2 3 3 1 1 3 3 ...
##  $ Smoke : Factor w/ 4 levels &quot;Heavy&quot;,&quot;Never&quot;,..: 2 4 3 2 2 2 2 2 2 2 ...
##  $ Height: num  173 178 NA 160 165 ...
##  $ M.I   : Factor w/ 2 levels &quot;Imperial&quot;,&quot;Metric&quot;: 2 1 NA 2 2 1 1 2 2 2 ...
##  $ Age   : num  18.2 17.6 16.9 20.3 23.7 ...</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="년-3월.html#cb386-1"></a><span class="kw">levels</span>(survey<span class="op">$</span>Smoke)</span></code></pre></div>
<pre><code>## [1] &quot;Heavy&quot; &quot;Never&quot; &quot;Occas&quot; &quot;Regul&quot;</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="년-3월.html#cb388-1"></a>frqtab &lt;-<span class="st"> </span><span class="kw">table</span>(survey<span class="op">$</span>Smoke)</span>
<span id="cb388-2"><a href="년-3월.html#cb388-2"></a>frqtab</span></code></pre></div>
<pre><code>## 
## Heavy Never Occas Regul 
##    11   189    19    17</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="년-3월.html#cb390-1"></a><span class="kw">class</span>(frqtab)</span></code></pre></div>
<pre><code>## [1] &quot;table&quot;</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="년-3월.html#cb392-1"></a>frqtab[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## Never 
##   189</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="년-3월.html#cb394-1"></a>frqtab[<span class="st">&quot;Never&quot;</span>]</span></code></pre></div>
<pre><code>## Never 
##   189</code></pre>
</div>
<div id="최빈값" class="section level5 hasAnchor">
<h5>최빈값<a href="년-3월.html#최빈값" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="년-3월.html#cb396-1"></a>frqtab <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(frqtab)</span></code></pre></div>
<pre><code>## 
## Heavy Never Occas Regul 
## FALSE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="년-3월.html#cb398-1"></a>frqtab[frqtab <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(frqtab)]</span></code></pre></div>
<pre><code>## Never 
##   189</code></pre>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="년-3월.html#cb400-1"></a><span class="kw">names</span>(frqtab[frqtab <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(frqtab)])</span></code></pre></div>
<pre><code>## [1] &quot;Never&quot;</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="년-3월.html#cb402-1"></a><span class="kw">which.max</span>(frqtab)</span></code></pre></div>
<pre><code>## Never 
##     2</code></pre>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="년-3월.html#cb404-1"></a>frqtab[<span class="kw">which.max</span>(frqtab)]</span></code></pre></div>
<pre><code>## Never 
##   189</code></pre>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="년-3월.html#cb406-1"></a><span class="kw">names</span>(frqtab[<span class="kw">which.max</span>(frqtab)])</span></code></pre></div>
<pre><code>## [1] &quot;Never&quot;</code></pre>
</div>
<div id="비율도표" class="section level5 hasAnchor">
<h5>비율도표<a href="년-3월.html#비율도표" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="년-3월.html#cb408-1"></a>frqtab.prop &lt;-<span class="st"> </span><span class="kw">prop.table</span>(frqtab)</span>
<span id="cb408-2"><a href="년-3월.html#cb408-2"></a>frqtab.prop</span></code></pre></div>
<pre><code>## 
##      Heavy      Never      Occas      Regul 
## 0.04661017 0.80084746 0.08050847 0.07203390</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="년-3월.html#cb410-1"></a>frqtab.prop[<span class="st">&quot;Never&quot;</span>]</span></code></pre></div>
<pre><code>##     Never 
## 0.8008475</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="년-3월.html#cb412-1"></a>frqtab.prop <span class="op">*</span><span class="st"> </span><span class="dv">100</span></span></code></pre></div>
<pre><code>## 
##     Heavy     Never     Occas     Regul 
##  4.661017 80.084746  8.050847  7.203390</code></pre>

</div>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="https://www.youtube.com/watch?v=3OEwk2VxZdE&amp;list=PLY0OaF78qqGAxKX91WuRigHpwBU0C2SB_&amp;index=31&amp;t=228s" class="uri">https://www.youtube.com/watch?v=3OEwk2VxZdE&amp;list=PLY0OaF78qqGAxKX91WuRigHpwBU0C2SB_&amp;index=31&amp;t=228s</a><a href="년-3월.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="http://aispiration.com/model/model-rsampling-time-series.html" class="uri">http://aispiration.com/model/model-rsampling-time-series.html</a><a href="년-3월.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="https://zorba78.github.io/cnu-r-programming-lecture-note/r-code-chunks.html" class="uri">https://zorba78.github.io/cnu-r-programming-lecture-note/r-code-chunks.html</a><a href="년-3월.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://stackoverflow.com/questions/16412638/install-an-r-package-directly-from-a-url-for-the-package-source" class="uri">https://stackoverflow.com/questions/16412638/install-an-r-package-directly-from-a-url-for-the-package-source</a><a href="년-3월.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="https://raw.githubusercontent.com/rafjaa/machine_learning_fecib/master/src/static/img/resampling.png" class="uri">https://raw.githubusercontent.com/rafjaa/machine_learning_fecib/master/src/static/img/resampling.png</a><a href="년-3월.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p><a href="https://raw.githubusercontent.com/rafjaa/machine_learning_fecib/master/src/static/img/smote.png" class="uri">https://raw.githubusercontent.com/rafjaa/machine_learning_fecib/master/src/static/img/smote.png</a><a href="년-3월.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p><a href="https://www.r-bloggers.com/2019/04/methods-for-dealing-with-imbalanced-data/" class="uri">https://www.r-bloggers.com/2019/04/methods-for-dealing-with-imbalanced-data/</a><a href="년-3월.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p><a href="http://www.ktword.co.kr/img_data/5094_2.JPG" class="uri">http://www.ktword.co.kr/img_data/5094_2.JPG</a><a href="년-3월.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p><a href="https://miro.medium.com/max/1400/1*fP1TTrA7TYD58rYgMHiL_A.png" class="uri">https://miro.medium.com/max/1400/1*fP1TTrA7TYD58rYgMHiL_A.png</a><a href="년-3월.html#fnref9" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="년-2월.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com//yeonkyupark/TIL2022/edit/main/10-Mar-01.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
